<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ramadan Companion üåô</title>

    <!-- PWA / Mobile Setup -->
    <link rel="manifest" href="manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Ramadan">
    <meta name="theme-color" content="#0a0a1a">
    <meta name="description" content="Your daily Ramadan spiritual guide with prayer times, Quran, and Duas.">

    <!-- App Icons -->
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="icon" type="image/png" href="icon.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Outfit:wght@300;400;600;700&display=swap"
        rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1a1a2e;
            --secondary: #16213e;
            --accent: #e94560;
            --gold: #ffd700;
            --gold-light: #ffed4a;
            --text: #ffffff;
            --text-muted: #a0a0a0;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 50%, #0f0f23 100%);
            min-height: 100vh;
            color: var(--text);
            overflow-x: hidden;
        }

        /* Animated stars background */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 0;
        }

        .star {
            position: absolute;
            width: 3px;
            height: 3px;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s infinite ease-in-out;
        }

        @keyframes twinkle {

            0%,
            100% {
                opacity: 0.3;
                transform: scale(1);
            }

            50% {
                opacity: 1;
                transform: scale(1.2);
            }
        }

        /* Moon decoration */
        .moon {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #ffd700 0%, #ffed4a 100%);
            border-radius: 50%;
            box-shadow: 0 0 60px rgba(255, 215, 0, 0.5), 0 0 100px rgba(255, 215, 0, 0.3);
            z-index: 1000;
            animation: moonGlow 3s infinite ease-in-out;
            pointer-events: none;
        }

        .moon::before {
            content: '';
            position: absolute;
            top: 5px;
            left: 15px;
            width: 60px;
            height: 60px;
            background: var(--primary);
            border-radius: 50%;
        }

        @keyframes moonGlow {

            0%,
            100% {
                box-shadow: 0 0 60px rgba(255, 215, 0, 0.5), 0 0 100px rgba(255, 215, 0, 0.3);
            }

            50% {
                box-shadow: 0 0 80px rgba(255, 215, 0, 0.7), 0 0 120px rgba(255, 215, 0, 0.4);
            }
        }

        .container {
            position: relative;
            z-index: 2;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            text-align: center;
            padding: 40px 0 30px;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
        }

        .lang-switch {
            position: absolute;
            top: 15px;
            left: 15px;
            z-index: 100;
            display: flex;
            gap: 8px;
        }

        .lang-btn {
            color: var(--gold);
            text-decoration: none;
            font-size: 0.8rem;
            padding: 6px 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            border: 1px solid rgba(255, 215, 0, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
            font-family: 'Outfit', sans-serif;
        }

        .lang-btn:hover {
            background: rgba(255, 215, 0, 0.1);
        }

        .lang-btn.active {
            background: var(--gold);
            color: var(--primary);
            font-weight: 700;
        }

        /* RTL Styles */
        [dir="rtl"] {
            font-family: 'Amiri', 'Outfit', sans-serif;
        }

        [dir="rtl"] .lang-switch {
            left: auto;
            right: 20px;
        }

        [dir="rtl"] .moon {
            right: auto;
            left: 20px;
        }

        [dir="rtl"] .dua-header,
        [dir="rtl"] .notification-header,
        [dir="rtl"] .prayer-header,
        [dir="rtl"] .quran-header,
        [dir="rtl"] .notes-header {
            flex-direction: row-reverse;
        }

        [dir="rtl"] .prayer-name,
        [dir="rtl"] .note-content {
            flex-direction: row-reverse;
            text-align: right;
        }

        [dir="rtl"] .speak-btn,
        [dir="rtl"] .fullscreen-btn {
            margin-left: 0;
            margin-right: 10px;
        }

        [dir="rtl"] .arabic-text,
        [dir="rtl"] .ayah-arabic,
        [dir="rtl"] .adhkar-arabic {
            text-align: center;
        }

        [dir="rtl"] .transliteration,
        [dir="rtl"] .adhkar-transliteration {
            border-left: none;
            border-right: 3px solid var(--accent);
            text-align: right;
        }

        [dir="rtl"] .english-text,
        [dir="rtl"] .ayah-translation,
        [dir="rtl"] .adhkar-meaning,
        [dir="rtl"] .subtitle {
            text-align: right;
        }

        [dir="rtl"] .nav-buttons {
            flex-direction: row-reverse;
        }

        .subtitle {
            color: var(--text-muted);
            font-size: 1rem;
            font-weight: 300;
        }

        /* Main Navigation Tab */
        .main-nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 25px;
            animation: fadeIn 0.8s ease-out;
            flex-wrap: wrap;
            padding: 0 10px;
        }

        .nav-tab {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: var(--text);
            text-decoration: none;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(5px);
        }

        .nav-tab:hover {
            background: rgba(255, 215, 0, 0.1);
            border-color: var(--gold);
            transform: translateY(-2px);
        }

        .nav-tab.active {
            background: var(--gold) !important;
            color: var(--primary) !important;
            border-color: var(--gold);
        }

        [dir="rtl"] .nav-tab {
            flex-direction: row-reverse;
        }

        /* Day Counter Card */
        .day-card {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.15) 0%, rgba(233, 69, 96, 0.1) 100%);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 24px;
            padding: 30px;
            text-align: center;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
            animation: slideUp 0.6s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .day-label {
            font-size: 1rem;
            color: var(--gold);
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 10px;
        }

        .day-number {
            font-size: 5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--gold) 0%, #fff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
        }

        .day-of-30 {
            font-size: 1.2rem;
            color: var(--text-muted);
            margin-top: 5px;
        }

        .not-ramadan {
            font-size: 1.5rem;
            color: var(--gold);
        }

        .countdown {
            font-size: 3rem;
            font-weight: 700;
            color: var(--gold-light);
            margin: 10px 0;
        }

        /* Dua Card */
        .dua-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 30px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
            animation: slideUp 0.8s ease-out;
        }

        .dua-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .dua-title {
            font-size: 1.2rem;
            color: var(--gold);
            font-weight: 600;
        }

        .speak-btn {
            background: linear-gradient(135deg, var(--accent) 0%, #ff6b6b 100%);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(233, 69, 96, 0.4);
        }

        .speak-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(233, 69, 96, 0.6);
        }

        .speak-btn:active {
            transform: scale(0.95);
        }

        .speak-btn svg {
            width: 24px;
            height: 24px;
            fill: white;
        }

        .arabic-text {
            font-family: 'Amiri', serif;
            font-size: 2rem;
            text-align: right;
            direction: rtl;
            color: var(--gold-light);
            line-height: 1.8;
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(255, 215, 0, 0.05);
            border-radius: 16px;
        }

        .transliteration {
            font-size: 1.1rem;
            color: var(--text);
            font-style: italic;
            margin-bottom: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border-left: 3px solid var(--accent);
        }

        .english-text {
            font-size: 1rem;
            color: var(--text-muted);
            line-height: 1.6;
        }

        /* Dua Slider Styles */
        .dua-slider {
            display: flex;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            scroll-behavior: smooth;
            gap: 40px;
            padding-bottom: 10px;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .dua-slider::-webkit-scrollbar {
            display: none;
        }

        .dua-slide {
            flex: 0 0 100%;
            scroll-snap-align: center;
            width: 100%;
        }

        /* Navigation buttons */
        .nav-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            animation: slideUp 1s ease-out;
        }

        .nav-btn {
            flex: 1;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.05);
            color: var(--text);
            border-radius: 16px;
            cursor: pointer;
            font-family: 'Outfit', sans-serif;
            font-size: 1rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .nav-btn:hover {
            background: rgba(255, 215, 0, 0.1);
            border-color: var(--gold);
            transform: translateY(-2px);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Footer */
        footer {
            margin-top: auto;
            text-align: center;
            padding: 20px;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        footer a {
            color: var(--gold);
            text-decoration: none;
        }

        /* Progress bar */
        .progress-container {
            margin-bottom: 25px;
            animation: slideUp 0.7s ease-out;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--gold) 0%, var(--accent) 100%);
            border-radius: 10px;
            transition: width 1s ease-out;
        }

        /* Responsive */
        @media (max-width: 480px) {
            header {
                padding-top: 70px;
                /* Space for lang switch */
            }

            h1 {
                font-size: 1.8rem;
                margin-top: 10px;
            }

            .arabic-text {
                font-size: 1.5rem;
            }

            .moon {
                width: 40px;
                height: 40px;
                top: 10px;
                right: 10px;
            }

            .moon::before {
                width: 32px;
                height: 32px;
                top: 2px;
                left: 8px;
            }

            .prayer-header,
            .notes-header,
            .dua-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .detect-location-btn {
                width: 100%;
                justify-content: center;
            }

            .method-selector {
                flex-direction: column;
                align-items: flex-start;
            }

            .method-selector select {
                width: 100%;
            }
        }

        /* Speaking animation */
        .speaking {
            animation: pulse 0.5s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.15);
            }
        }

        /* Notification Card */
        .notification-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 25px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
            animation: slideUp 0.9s ease-out;
        }

        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .notif-enabled {
            color: var(--gold);
            font-weight: 600;
        }

        /* Recipes View Styles */
        #recipesView {
            animation: fadeIn 0.5s ease-out;
            padding-bottom: 50px;
        }

        .recipe-category {
            margin-bottom: 40px;
        }

        .category-title {
            font-size: 1.5rem;
            color: var(--gold);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(255, 215, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .recipe-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .recipe-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 20px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border-left: 4px solid var(--gold);
        }

        .recipe-card:hover {
            transform: translateY(-5px);
            border-color: var(--gold);
            background: rgba(255, 215, 0, 0.08);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .recipe-name {
            font-size: 1.25rem;
            color: var(--gold-light);
            font-weight: 700;
            margin-bottom: 8px;
        }

        .recipe-desc {
            font-size: 0.95rem;
            color: var(--text-muted);
            line-height: 1.6;
        }

        [dir="rtl"] .recipe-card {
            border-left: none;
            border-right: 4px solid var(--gold);
            text-align: right;
        }

        [dir="rtl"] .category-title {
            flex-direction: row-reverse;
        }

        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            width: 60px;
            height: 32px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.2);
            transition: 0.3s;
            border-radius: 32px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 24px;
            width: 24px;
            left: 4px;
            bottom: 4px;
            background: white;
            transition: 0.3s;
            border-radius: 50%;
        }

        .toggle-switch input:checked+.toggle-slider {
            background: linear-gradient(135deg, var(--gold) 0%, #ffb700 100%);
        }

        .toggle-switch input:checked+.toggle-slider:before {
            transform: translateX(28px);
        }

        .notification-settings {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .notification-settings.active {
            display: block;
        }

        .time-picker-group {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .time-picker-label {
            color: var(--text-muted);
            font-size: 0.95rem;
        }

        .time-picker {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 10px 15px;
            color: white;
            font-family: 'Outfit', sans-serif;
            font-size: 1rem;
            cursor: pointer;
        }

        .time-picker:focus {
            outline: none;
            border-color: var(--gold);
        }

        .save-time-btn {
            background: linear-gradient(135deg, var(--gold) 0%, #ffb700 100%);
            border: none;
            border-radius: 12px;
            padding: 10px 20px;
            color: #1a1a2e;
            font-family: 'Outfit', sans-serif;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .save-time-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
        }

        .notification-status {
            margin-top: 12px;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .notification-status.success {
            color: #4ade80;
        }

        /* Prayer Times Card */
        .prayer-card {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.15) 0%, rgba(33, 150, 243, 0.1) 100%);
            border: 1px solid rgba(76, 175, 80, 0.3);
            border-radius: 24px;
            padding: 25px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
            animation: slideUp 1s ease-out;
        }

        .prayer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .method-selector {
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 0 10px;
        }

        .method-selector label {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .method-selector select {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text);
            padding: 5px 10px;
            border-radius: 8px;
            font-size: 0.85rem;
            flex: 1;
            outline: none;
            cursor: pointer;
        }

        .method-selector select:focus {
            border-color: var(--gold);
        }

        .asr-note {
            font-size: 0.75rem;
            color: var(--accent);
            padding: 0 10px;
            margin-bottom: 15px;
            font-style: italic;
        }

        .prayer-title {
            font-size: 1.2rem;
            color: #4ade80;
            font-weight: 600;
        }

        .prayer-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .prayer-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .prayer-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .prayer-item.active {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid rgba(76, 175, 80, 0.5);
        }

        .prayer-name {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
        }

        .prayer-icon {
            font-size: 1.2rem;
        }

        .prayer-time-input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 8px 12px;
            color: white;
            font-family: 'Outfit', sans-serif;
            font-size: 0.95rem;
            width: 100px;
            text-align: center;
        }

        .prayer-time-input:focus {
            outline: none;
            border-color: #4ade80;
        }

        .prayer-time-display {
            color: var(--gold);
            font-weight: 600;
            font-size: 1.1rem;
        }

        .next-prayer-banner {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.3) 0%, rgba(33, 150, 243, 0.2) 100%);
            border-radius: 12px;
            padding: 15px;
            margin-top: 15px;
            text-align: center;
        }

        .next-prayer-label {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 5px;
        }

        .next-prayer-name {
            font-size: 1.3rem;
            font-weight: 600;
            color: #4ade80;
        }

        .next-prayer-countdown {
            font-size: 1rem;
            color: var(--gold);
            margin-top: 5px;
        }

        .save-prayers-btn {
            width: 100%;
            margin-top: 15px;
            background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
            border: none;
            border-radius: 12px;
            padding: 12px 20px;
            color: #1a1a2e;
            font-family: 'Outfit', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .save-prayers-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 15px rgba(74, 222, 128, 0.4);
        }

        /* Quran Ayahs Card */
        .quran-card {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(59, 130, 246, 0.1) 100%);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 24px;
            padding: 25px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
        }

        .quran-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .quran-title {
            font-size: 1.2rem;
            color: #a78bfa;
            font-weight: 600;
        }

        .ayah-container {
            background: rgba(139, 92, 246, 0.1);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 15px;
        }

        .ayah-arabic {
            font-family: 'Amiri', serif;
            font-size: 1.8rem;
            text-align: right;
            direction: rtl;
            color: #e0d4ff;
            line-height: 2;
            margin-bottom: 15px;
        }

        .ayah-translation {
            font-size: 1rem;
            color: var(--text-muted);
            line-height: 1.6;
            font-style: italic;
        }

        .ayah-reference {
            margin-top: 10px;
            font-size: 0.85rem;
            color: #a78bfa;
        }

        .ayah-nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }

        .ayah-nav-btn {
            background: rgba(139, 92, 246, 0.2);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 12px;
            padding: 10px 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .ayah-nav-btn:hover {
            background: rgba(139, 92, 246, 0.4);
        }

        /* Adhkar Cards */
        .adhkar-section {
            margin-bottom: 25px;
        }

        .adhkar-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 15px;
            backdrop-filter: blur(10px);
        }

        .adhkar-card.morning {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.15) 0%, rgba(245, 158, 11, 0.1) 100%);
            border-color: rgba(251, 191, 36, 0.3);
        }

        .adhkar-card.evening {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(79, 70, 229, 0.1) 100%);
            border-color: rgba(99, 102, 241, 0.3);
        }

        .adhkar-card.afternoon {
            background: linear-gradient(135deg, rgba(236, 72, 153, 0.15) 0%, rgba(219, 39, 119, 0.1) 100%);
            border-color: rgba(236, 72, 153, 0.3);
        }

        .adhkar-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .adhkar-icon {
            font-size: 1.5rem;
        }

        .adhkar-title {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .adhkar-title.morning {
            color: #fbbf24;
        }

        .adhkar-title.evening {
            color: #818cf8;
        }

        .adhkar-title.afternoon {
            color: #f472b6;
        }

        .adhkar-arabic {
            font-family: 'Amiri', serif;
            font-size: 1.5rem;
            text-align: right;
            direction: rtl;
            line-height: 1.8;
            margin-bottom: 12px;
            color: #fff;
        }

        .adhkar-transliteration {
            font-size: 0.95rem;
            color: var(--text);
            font-style: italic;
            margin-bottom: 10px;
        }

        .adhkar-meaning {
            font-size: 0.9rem;
            color: var(--text-muted);
            line-height: 1.5;
        }

        /* Notes & Reminders Card */
        .notes-card {
            background: linear-gradient(135deg, rgba(233, 69, 96, 0.15) 0%, rgba(26, 26, 46, 0.1) 100%);
            border: 1px solid rgba(233, 69, 96, 0.3);
            border-radius: 24px;
            padding: 25px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
            animation: slideUp 1.1s ease-out;
        }

        .notes-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .notes-title {
            font-size: 1.2rem;
            color: var(--accent);
            font-weight: 600;
        }

        .note-input-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
        }

        .note-input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 12px 15px;
            color: white;
            font-family: 'Outfit', sans-serif;
            font-size: 1rem;
        }

        .note-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .note-time-group {
            display: flex;
            gap: 10px;
        }

        .note-time-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 10px;
            color: white;
            font-family: 'Outfit', sans-serif;
        }

        .add-note-btn {
            background: linear-gradient(135deg, var(--accent) 0%, #ff6b6b 100%);
            border: none;
            border-radius: 12px;
            padding: 10px 20px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .add-note-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(233, 69, 96, 0.4);
        }

        .notes-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .note-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            border-left: 4px solid var(--accent);
            animation: fadeIn 0.4s ease-out;
        }

        .note-content {
            flex: 1;
        }

        .note-text {
            font-size: 1rem;
            margin-bottom: 4px;
        }

        .note-time-tag {
            font-size: 0.8rem;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .delete-note-btn {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.3);
            cursor: pointer;
            padding: 8px;
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }

        .delete-note-btn:hover {
            color: var(--accent);
            transform: scale(1.1);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateX(-10px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Full Screen Overlay */
        .fullscreen-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 10, 25, 0.98);
            z-index: 2000;
            padding: 40px 20px;
            overflow-y: auto;
            backdrop-filter: blur(20px);
            justify-content: center;
            align-items: center;
            animation: fadeInOverlay 0.3s ease-out;
        }

        @keyframes fadeInOverlay {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .fullscreen-overlay.active {
            display: flex;
        }

        .fullscreen-content {
            width: 100%;
            max-width: 900px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 40px;
            padding: 60px 40px;
            position: relative;
            box-shadow: 0 0 100px rgba(255, 215, 0, 0.1);
            text-align: center;
        }

        .close-fullscreen {
            position: absolute;
            top: 30px;
            right: 30px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .close-fullscreen:hover {
            background: var(--accent);
            transform: rotate(90deg);
        }

        .fullscreen-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 12px;
            padding: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gold);
            transition: all 0.3s ease;
            margin-left: 10px;
        }

        .fullscreen-btn:hover {
            background: rgba(255, 215, 0, 0.2);
            transform: scale(1.1);
        }

        .fullscreen-btn svg {
            width: 20px;
            height: 20px;
            stroke: currentColor;
        }

        /* Large text for fullscreen */
        .fullscreen-content .arabic-text,
        .fullscreen-content .ayah-arabic,
        .fullscreen-content .adhkar-arabic {
            font-size: clamp(2rem, 5vw, 4rem);
            line-height: 1.8;
            text-align: center;
            margin-bottom: 40px;
            color: var(--gold-light);
            font-family: 'Amiri', serif;
        }

        .fullscreen-content .transliteration,
        .fullscreen-content .adhkar-transliteration,
        .fullscreen-content .ayah-translation {
            font-size: clamp(1.1rem, 3vw, 1.8rem);
            text-align: center;
            margin-bottom: 25px;
            font-style: italic;
        }

        .fullscreen-content .english-text,
        .fullscreen-content .adhkar-meaning {
            font-size: clamp(1rem, 2.5vw, 1.5rem);
            text-align: center;
            color: var(--text-muted);
        }

        .fullscreen-content .dua-title,
        .fullscreen-content .quran-title,
        .fullscreen-content .adhkar-title {
            font-size: 2rem;
            color: var(--gold);
            margin-bottom: 40px;
            display: block;
        }

        @media (max-width: 600px) {
            .fullscreen-content {
                padding: 40px 20px;
                border-radius: 24px;
            }
        }

        /* Sadaqah Planner */
        .sadaqah-card {
            background: linear-gradient(135deg, rgba(233, 69, 96, 0.15) 0%, rgba(26, 26, 46, 0.4) 100%);
            border: 1px solid rgba(233, 69, 96, 0.3);
            border-radius: 24px;
            padding: 25px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
            animation: slideUp 1.1s ease-out;
        }

        .sadaqah-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .sadaqah-title {
            font-size: 1.2rem;
            color: var(--accent);
            font-weight: 700;
        }

        .sadaqah-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .sadaqah-input {
            flex: 1;
            min-width: 100px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 10px 15px;
            color: white;
            font-family: 'Outfit', sans-serif;
            font-size: 1rem;
        }

        .sadaqah-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .sadaqah-suggest-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: 0.3s;
        }

        .sadaqah-suggest-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(233, 69, 96, 0.4);
        }

        .sadaqah-plan {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            padding: 15px;
            border: 1px dashed rgba(233, 69, 96, 0.2);
            margin-top: 10px;
            display: none;
        }

        .sadaqah-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            color: var(--text);
            font-size: 0.95rem;
        }

        .sadaqah-item:last-child {
            margin-bottom: 0;
        }

        .sadaqah-bullet {
            color: var(--accent);
            font-size: 1.2rem;
        }
    </style>

</head>

<body>
    <div class="stars" id="stars"></div>
    <div class="moon"></div>

    <div class="lang-switch">
        <button onclick="setLanguage('en')" id="enBtn" class="lang-btn active">English</button>
        <button onclick="setLanguage('ar')" id="arBtn" class="lang-btn">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</button>
    </div>

    <div id="fullscreenOverlay" class="fullscreen-overlay" onclick="handleOverlayClick(event)">
        <button class="close-fullscreen" onclick="closeFullScreen()">&times;</button>
        <div id="fullscreenContent" class="fullscreen-content"></div>
    </div>

    <div class="container">
        <header>
            <h1 id="mainTitle">üåô Ramadan Companion</h1>
            <p class="subtitle" id="mainSubtitle">Your daily spiritual guide</p>
        </header>

        <nav class="main-nav">
            <a href="index.html" class="nav-tab active" id="homeTab">üè† Home</a>
            <a href="quran.html" class="nav-tab" id="quranTab">üìñ Full Quran</a>
            <a href="recipes.html" class="nav-tab" id="recipesTab">üç≥ Recipes</a>
        </nav>

        <div id="homeView">

            <div class="day-card" id="dayCard">
                <!-- Filled by JavaScript -->
            </div>

            <div class="progress-container" id="progressContainer">
                <!-- Filled by JavaScript -->
            </div>

            <div class="dua-card" id="duaCard">
                <!-- Filled by JavaScript -->
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" id="prevBtn" onclick="prevDay()">‚Üê Previous Day</button>
                <button class="nav-btn" id="todayBtn" onclick="goToToday()">üìÖ Today</button>
                <button class="nav-btn" id="nextBtn" onclick="nextDay()">Next Day ‚Üí</button>
            </div>

            <button class="nav-btn" onclick="showAllDuasModal()" id="browseAllBtn"
                style="width: 100%; margin-bottom: 25px; background: rgba(255, 215, 0, 0.1); border-color: var(--gold); font-weight: 700;">üìú
                Browse All Duas</button>

            <!-- Notification Settings -->
            <div class="notification-card">
                <div class="notification-header">
                    <span class="notification-title" id="notifTitle">üîî Daily Reminders</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="notificationToggle" onchange="toggleNotifications()">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="notification-settings" id="notificationSettings">
                    <div class="time-picker-group">
                        <span class="time-picker-label" id="remindAtLabel">Remind me at:</span>
                        <input type="time" class="time-picker" id="reminderTime" value="05:00">
                        <button class="save-time-btn" onclick="saveReminderTime()" id="saveNotifBtn">Save</button>
                    </div>
                    <p class="notification-status" id="notificationStatus"></p>
                </div>
            </div>

            <div class="prayer-card">
                <div class="prayer-header">
                    <span class="prayer-title" id="prayerTimesTitle">üïå Prayer Times</span>
                    <button class="detect-location-btn" onclick="detectLocation()" id="detectLocBtn"
                        title="Detect Location">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                            <circle cx="12" cy="10" r="3"></circle>
                        </svg>
                        <span id="detectLocText">Detect Location</span>
                    </button>
                </div>

                <div class="method-selector">
                    <label for="calcMethod" id="methodLabel">Calculation Method:</label>
                    <select id="calcMethod" onchange="detectLocation()">
                        <option value="2">ISNA (North America)</option>
                        <option value="3">Muslim World League</option>
                        <option value="4">Umm Al-Qura (Makkah)</option>
                        <option value="5">Egyptian Authority</option>
                        <option value="1">University of Karachi</option>
                        <option value="0">Shia Ithna-Ashari</option>
                        <option value="7">Tehran (Geophysics)</option>
                        <option value="8">Gulf Region</option>
                        <option value="9">Kuwait</option>
                        <option value="10">Qatar</option>
                        <option value="11">Singapore (MUIS)</option>
                        <option value="12">France (UOIF)</option>
                        <option value="13">Turkey (Diyanet)</option>
                        <option value="14">Russia</option>
                        <option value="15">Moonsighting Committee</option>
                        <option value="16">Dubai (UAE)</option>
                        <option value="17">Malaysia (JAKIM)</option>
                        <option value="18">Tunisia</option>
                        <option value="19">Algeria</option>
                        <option value="20">Indonesia (KEMENAG)</option>
                        <option value="21">Morocco</option>
                        <option value="22">Brazil</option>
                    </select>
                </div>

                <div class="method-selector">
                    <label for="asrMadhab" id="madhabLabel">Asr Method (Madhab):</label>
                    <select id="asrMadhab" onchange="detectLocation()">
                        <option value="0">Standard (Shafi'i, Maliki, Hanbali)</option>
                        <option value="1">Hanafi (Recommended for US/Canada)</option>
                    </select>
                </div>



                <div id="locationStatus" class="location-status"></div>

                <div class="prayer-list">
                    <div class="prayer-item" id="fajrItem">
                        <span class="prayer-name">
                            <span class="prayer-icon">üåÖ</span>
                            <span id="fajrName">Fajr</span>
                        </span>
                        <input type="time" class="prayer-time-input" id="fajrTime" value="05:30"
                            onchange="savePrayerTimes()">
                    </div>

                    <div class="prayer-item" id="dhuhrItem">
                        <span class="prayer-name">
                            <span class="prayer-icon">‚òÄÔ∏è</span>
                            <span id="dhuhrName">Dhuhr</span>
                        </span>
                        <input type="time" class="prayer-time-input" id="dhuhrTime" value="12:30"
                            onchange="savePrayerTimes()">
                    </div>

                    <div class="prayer-item" id="asrItem">
                        <span class="prayer-name">
                            <span class="prayer-icon">üå§Ô∏è</span>
                            <span id="asrName">Asr</span>
                        </span>
                        <input type="time" class="prayer-time-input" id="asrTime" value="15:45"
                            onchange="savePrayerTimes()">
                    </div>

                    <div class="prayer-item" id="maghribItem">
                        <span class="prayer-name">
                            <span class="prayer-icon">üåÖ</span>
                            <span id="maghribName">Maghrib</span>
                        </span>
                        <input type="time" class="prayer-time-input" id="maghribTime" value="18:15"
                            onchange="savePrayerTimes()">
                    </div>

                    <div class="prayer-item" id="ishaItem">
                        <span class="prayer-name">
                            <span class="prayer-icon">üåô</span>
                            <span id="ishaName">Isha</span>
                        </span>
                        <input type="time" class="prayer-time-input" id="ishaTime" value="19:45"
                            onchange="savePrayerTimes()">
                    </div>
                </div>

                <!-- Next Prayer Banner -->
                <div class="next-prayer-banner" id="nextPrayerBanner">
                    <div class="next-prayer-label" id="nextPrayerLabel">Next Prayer</div>
                    <div class="next-prayer-name" id="nextPrayerName">Fajr</div>
                    <div class="next-prayer-countdown" id="nextPrayerCountdown">in 2h 30m</div>
                </div>

                <button class="save-prayers-btn" onclick="savePrayerTimes()" id="savePrayersBtn">üíæ Save Prayer
                    Times</button>
            </div>

            <!-- Notes & Reminders -->
            <div class="notes-card">
                <div class="notes-header">
                    <span class="notes-title" id="notesTitle">üìù Personal Notes & Reminders</span>
                </div>

                <div class="note-input-group">
                    <input type="text" id="noteTextInput" class="note-input"
                        placeholder="Enter your note (e.g., Read Surah Kahf)">
                    <div class="note-time-group">
                        <input type="time" id="noteTimeInput" class="note-time-input">
                        <button class="add-note-btn" onclick="addNote()" id="addNoteBtn">Add Note</button>
                    </div>
                </div>

                <div class="notes-list" id="notesList">
                    <!-- Notes will be added here via JavaScript -->
                </div>
            </div>


            <!-- Daily Quran Ayahs -->
            <div class="quran-card">
                <div class="quran-header">
                    <span class="quran-title" id="quranTitle">üìñ Daily Quran Ayahs</span>
                    <button class="fullscreen-btn" onclick="openFullScreen('ayah')" title="Full Screen">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path
                                d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3">
                            </path>
                        </svg>
                    </button>
                </div>
                <div class="ayah-container" id="ayahContainer">
                    <div class="ayah-arabic" id="ayahArabic"></div>
                    <div class="ayah-translation" id="ayahTranslation"></div>
                    <div class="ayah-reference" id="ayahReference"></div>
                </div>
                <div class="ayah-nav">
                    <button class="ayah-nav-btn" onclick="prevAyah()" id="prevAyahBtn">‚Üê Previous</button>
                    <button class="ayah-nav-btn" onclick="nextAyah()" id="nextAyahBtn">Next ‚Üí</button>
                </div>
            </div>

            <!-- Morning/Evening/Afternoon Adhkar -->
            <div class="adhkar-section">
                <!-- Morning Dua -->
                <div class="adhkar-card morning" id="morningCard">
                    <div class="adhkar-header">
                        <span class="adhkar-icon">üåÖ</span>
                        <span class="adhkar-title morning">Morning Dua (Adhkar As-Sabah)</span>
                        <button class="fullscreen-btn" onclick="openFullScreen('adhkar', 'morningCard')"
                            title="Full Screen" style="margin-left: auto;">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round">
                                <path
                                    d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3">
                                </path>
                            </svg>
                        </button>
                    </div>
                    <div class="adhkar-arabic">ÿ£ŸéÿµŸíÿ®Ÿéÿ≠ŸíŸÜŸéÿß ŸàŸéÿ£ŸéÿµŸíÿ®Ÿéÿ≠Ÿé ÿßŸÑŸíŸÖŸèŸÑŸíŸÉŸè ŸÑŸêŸÑŸéŸëŸáŸêÿå ŸàŸéÿßŸÑŸíÿ≠ŸéŸÖŸíÿØŸè ŸÑŸêŸÑŸéŸëŸáŸêÿå ŸÑŸéÿß
                        ÿ•ŸêŸÑŸéŸ∞ŸáŸé
                        ÿ•ŸêŸÑŸéŸëÿß ÿßŸÑŸÑŸéŸëŸáŸè ŸàŸéÿ≠ŸíÿØŸéŸáŸè ŸÑŸéÿß ÿ¥Ÿéÿ±ŸêŸäŸÉŸé ŸÑŸéŸáŸè</div>
                    <div class="adhkar-transliteration">Asbahna wa asbahal mulku lillah, walhamdu lillah, la ilaha
                        illallahu
                        wahdahu la sharika lah</div>
                    <div class="adhkar-meaning">We have entered the morning and the kingdom belongs to Allah. Praise is
                        to
                        Allah. None has the right to be worshipped except Allah alone, with no partner.</div>
                </div>

                <!-- Afternoon Dua -->
                <div class="adhkar-card afternoon" id="afternoonCard">
                    <div class="adhkar-header">
                        <span class="adhkar-icon">‚òÄÔ∏è</span>
                        <span class="adhkar-title afternoon">Afternoon Dua</span>
                        <button class="fullscreen-btn" onclick="openFullScreen('adhkar', 'afternoonCard')"
                            title="Full Screen" style="margin-left: auto;">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round">
                                <path
                                    d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3">
                                </path>
                            </svg>
                        </button>
                    </div>
                    <div class="adhkar-arabic">ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿ•ŸêŸÜŸêŸëŸä ÿ£Ÿéÿ≥Ÿíÿ£ŸéŸÑŸèŸÉŸé ÿπŸêŸÑŸíŸÖŸãÿß ŸÜŸéÿßŸÅŸêÿπŸãÿßÿå ŸàŸéÿ±Ÿêÿ≤ŸíŸÇŸãÿß ÿ∑ŸéŸäŸêŸëÿ®Ÿãÿßÿå
                        ŸàŸéÿπŸéŸÖŸéŸÑŸãÿß
                        ŸÖŸèÿ™ŸéŸÇŸéÿ®ŸéŸëŸÑŸãÿß</div>
                    <div class="adhkar-transliteration">Allahumma inni as'aluka 'ilman nafi'an, wa rizqan tayyiban, wa
                        'amalan mutaqabbalan</div>
                    <div class="adhkar-meaning">O Allah, I ask You for beneficial knowledge, good provision, and
                        accepted
                        deeds.</div>
                </div>

                <!-- Evening Dua -->
                <div class="adhkar-card evening" id="eveningCard">
                    <div class="adhkar-header">
                        <span class="adhkar-icon">üåô</span>
                        <span class="adhkar-title evening">Evening Dua (Adhkar Al-Masa)</span>
                        <button class="fullscreen-btn" onclick="openFullScreen('adhkar', 'eveningCard')"
                            title="Full Screen" style="margin-left: auto;">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round">
                                <path
                                    d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3">
                                </path>
                            </svg>
                        </button>
                    </div>
                    <div class="adhkar-arabic">ÿ£ŸéŸÖŸíÿ≥ŸéŸäŸíŸÜŸéÿß ŸàŸéÿ£ŸéŸÖŸíÿ≥ŸéŸâ ÿßŸÑŸíŸÖŸèŸÑŸíŸÉŸè ŸÑŸêŸÑŸéŸëŸáŸêÿå ŸàŸéÿßŸÑŸíÿ≠ŸéŸÖŸíÿØŸè ŸÑŸêŸÑŸéŸëŸáŸêÿå ŸÑŸéÿß ÿ•ŸêŸÑŸéŸ∞ŸáŸé
                        ÿ•ŸêŸÑŸéŸëÿß ÿßŸÑŸÑŸéŸëŸáŸè ŸàŸéÿ≠ŸíÿØŸéŸáŸè ŸÑŸéÿß ÿ¥Ÿéÿ±ŸêŸäŸÉŸé ŸÑŸéŸáŸè</div>
                    <div class="adhkar-transliteration">Amsayna wa amsal mulku lillah, walhamdu lillah, la ilaha
                        illallahu
                        wahdahu la sharika lah</div>
                    <div class="adhkar-meaning">We have entered the evening and the kingdom belongs to Allah. Praise is
                        to
                        Allah. None has the right to be worshipped except Allah alone, with no partner.</div>
                </div>
            </div>
        </div>

        <div class="sadaqah-card">
            <div class="sadaqah-header">
                <span class="sadaqah-icon" style="font-size: 1.5rem;">üíù</span>
                <span class="sadaqah-title" id="sadaqahTitle">Sadaqah Planner</span>
            </div>
            <p style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 15px;" id="sadaqahSubtitle">Enter your
                age
                to get personalized charity ideas for today.</p>
            <div class="sadaqah-input-group">
                <input type="number" id="userAge" class="sadaqah-input" placeholder="Your Age" min="1" max="120">
                <button class="sadaqah-suggest-btn" id="sadaqahBtn" onclick="generateSadaqahPlan()">Get
                    Recommendations</button>
            </div>
            <div id="sadaqahPlan" class="sadaqah-plan"></div>
        </div>
    </div>

    <footer>
        <p id="footerMubarak">Ramadan Mubarak! ü§≤</p>
        <p style="margin-top: 8px; font-size: 0.8rem;" id="footerMadeWith">Made with ‚ù§Ô∏è for you</p>
    </footer>
    </div>

    <script>
        // Ramadan 2026 starts approximately February 17, 2026
        const RAMADAN_START_2026 = new Date('2026-02-17');
        const RAMADAN_START_2027 = new Date('2027-02-06');

        // Expanded Library of 50 Authentic Duas
        const ALL_DUAS = [
            {
                arabic: "ÿ∞ŸéŸáŸéÿ®Ÿé ÿßŸÑÿ∏ŸéŸëŸÖŸéÿ£Ÿè ŸàŸéÿßÿ®Ÿíÿ™ŸéŸÑŸéŸëÿ™Ÿê ÿßŸÑŸíÿπŸèÿ±ŸèŸàŸÇŸè ŸàŸéÿ´Ÿéÿ®Ÿéÿ™Ÿé ÿßŸÑÿ£Ÿéÿ¨Ÿíÿ±Ÿè ÿ•ŸêŸÜŸí ÿ¥Ÿéÿßÿ°Ÿé ÿßŸÑŸÑŸéŸëŸáŸè",
                transliteration: "Dhahaba al-zam'u wa'btallat al-'uruqu wa thabata al-ajru in sha' Allah",
                english: "Thirst is gone, the veins are moistened, and the reward is certain if Allah wills."
            },
            {
                arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿ•ŸêŸÜŸéŸëŸÉŸé ÿπŸèŸÅŸèŸàŸåŸë ÿ™Ÿèÿ≠Ÿêÿ®ŸèŸë ÿßŸÑŸíÿπŸéŸÅŸíŸàŸé ŸÅŸéÿßÿπŸíŸÅŸè ÿπŸéŸÜŸêŸëŸä",
                transliteration: "Allahumma innaka 'afuwwun tuhibbul-'afwa fa'fu 'anni",
                english: "O Allah, You are Most Forgiving and You love forgiveness, so forgive me."
            },
            {
                arabic: "ÿ±Ÿéÿ®ŸéŸëŸÜŸéÿß ÿ¢ÿ™ŸêŸÜŸéÿß ŸÅŸêŸä ÿßŸÑÿØŸèŸëŸÜŸíŸäŸéÿß ÿ≠Ÿéÿ≥ŸéŸÜŸéÿ©Ÿã ŸàŸéŸÅŸêŸä ÿßŸÑÿ¢ÿÆŸêÿ±Ÿéÿ©Ÿê ÿ≠Ÿéÿ≥ŸéŸÜŸéÿ©Ÿã ŸàŸéŸÇŸêŸÜŸéÿß ÿπŸéÿ∞Ÿéÿßÿ®Ÿé ÿßŸÑŸÜŸéŸëÿßÿ±Ÿê",
                transliteration: "Rabbana atina fid-dunya hasanatan wa fil-akhirati hasanatan waqina 'adhaban-nar",
                english: "Our Lord, give us in this world that which is good and in the Hereafter that which is good and protect us from the punishment of the Fire."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ•ŸÜŸä ÿ£ÿ≥ÿ£ŸÑŸÉ ÿßŸÑŸáÿØŸâ ŸàÿßŸÑÿ™ŸÇŸâ ŸàÿßŸÑÿπŸÅÿßŸÅ ŸàÿßŸÑÿ∫ŸÜŸâ",
                transliteration: "Allahumma inni as'alukal-huda wat-tuqa wal-'afafa wal-ghina",
                english: "O Allah, I ask You for guidance, piety, chastity, and self-sufficiency."
            },
            {
                arabic: "Ÿäÿß ŸÖŸÇŸÑÿ® ÿßŸÑŸÇŸÑŸàÿ® ÿ´ÿ®ÿ™ ŸÇŸÑÿ®Ÿä ÿπŸÑŸâ ÿØŸäŸÜŸÉ",
                transliteration: "Ya Muqallibal-qulubi thabbit qalbi 'ala dinik",
                english: "O Turner of the hearts, keep my heart firm upon Your religion."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ•ŸÜŸä ÿ£ÿπŸàÿ∞ ÿ®ŸÉ ŸÖŸÜ ÿßŸÑÿπÿ¨ÿ≤ ŸàÿßŸÑŸÉÿ≥ŸÑ ŸàÿßŸÑÿ¨ÿ®ŸÜ ŸàÿßŸÑÿ®ÿÆŸÑ ŸàŸáÿ±ŸÖ Ÿàÿπÿ∞ÿßÿ® ÿßŸÑŸÇÿ®ÿ±",
                transliteration: "Allahumma inni a'udhu bika minal-'ajzi wal-kasali wal-jubni wal-bukhli wal-harami wa 'adhabil-qabr",
                english: "O Allah, I seek refuge in You from helplessness, laziness, cowardice, miserliness, senility, and the punishment of the grave."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ•ŸÜŸä ÿ£ÿπŸàÿ∞ ÿ®ŸÉ ŸÖŸÜ ÿπŸÑŸÖ ŸÑÿß ŸäŸÜŸÅÿπÿå ŸàŸÖŸÜ ŸÇŸÑÿ® ŸÑÿß ŸäÿÆÿ¥ÿπÿå ŸàŸÖŸÜ ŸÜŸÅÿ≥ ŸÑÿß ÿ™ÿ¥ÿ®ÿπÿå ŸàŸÖŸÜ ÿØÿπŸàÿ© ŸÑÿß Ÿäÿ≥ÿ™ÿ¨ÿßÿ® ŸÑŸáÿß",
                transliteration: "Allahumma inni a'udhu bika min 'ilmin la yanfa', wa min qalbin la yakhsha', wa min nafsin la tashba', wa min da'watin la yustajabu laha",
                english: "O Allah, I seek refuge in You from knowledge that does not benefit, from a heart that does not fear You, from a soul that is never satisfied, and from a supplication that is not answered."
            },
            {
                arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿ®Ÿéÿßÿ±ŸêŸÉŸí ŸÑŸéŸÜŸéÿß ŸÅŸêŸä ÿ±Ÿéÿ¨Ÿéÿ®Ÿç ŸàŸéÿ¥ŸéÿπŸíÿ®ŸéÿßŸÜŸé ŸàŸéÿ®ŸéŸÑŸêŸëÿ∫ŸíŸÜŸéÿß ÿ±ŸéŸÖŸéÿ∂ŸéÿßŸÜŸé",
                transliteration: "Allahumma barik lana fi Rajaba wa Sha'bana wa ballighna Ramadana",
                english: "O Allah, bless us in Rajab and Sha'ban and allow us to reach Ramadan."
            },
            {
                arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿßÿ∫ŸíŸÅŸêÿ±Ÿí ŸÑŸêŸä ÿ∞ŸéŸÜŸíÿ®ŸêŸä ŸÉŸèŸÑŸéŸëŸáŸè ÿØŸêŸÇŸéŸëŸáŸè ŸàŸéÿ¨ŸêŸÑŸéŸëŸáŸè ŸàŸéÿ£ŸéŸàŸéŸëŸÑŸéŸáŸè ŸàŸéÿ¢ÿÆŸêÿ±ŸéŸáŸè ŸàŸéÿπŸéŸÑÿßŸÜŸêŸäŸéÿ™ŸéŸáŸè ŸàŸéÿ≥Ÿêÿ±ŸéŸëŸáŸè",
                transliteration: "Allahumma-ghfir li dhanbi kullahu, diqqahu wa jillahu, wa awwalahu wa akhirahu, wa 'alaniyatahu wa sirrahu",
                english: "O Allah, forgive all my sins: the small and the great, the first and the last, the public and the private."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ•ŸÜŸä ÿ£ÿ≥ÿ£ŸÑŸÉ ÿßŸÑÿ¨ŸÜÿ© Ÿàÿ£ÿπŸàÿ∞ ÿ®ŸÉ ŸÖŸÜ ÿßŸÑŸÜÿßÿ±",
                transliteration: "Allahumma inni as'alukal-jannata wa a'udhu bika minan-nar",
                english: "O Allah, I ask You for Paradise and seek refuge in You from the Fire."
            },
            {
                arabic: "ÿ±Ÿéÿ®ŸêŸë ÿßÿ¨ŸíÿπŸéŸÑŸíŸÜŸêŸä ŸÖŸèŸÇŸêŸäŸÖŸé ÿßŸÑÿµŸéŸëŸÑŸéÿßÿ©Ÿê ŸàŸéŸÖŸêŸÜ ÿ∞Ÿèÿ±ŸêŸëŸäŸéŸëÿ™ŸêŸä ÿ±Ÿéÿ®ŸéŸëŸÜŸéÿß ŸàŸéÿ™ŸéŸÇŸéÿ®ŸéŸëŸÑŸí ÿØŸèÿπŸéÿßÿ°Ÿê",
                transliteration: "Rabbi-j'alni muqimas-salati wa min dhurriyyati Rabbana wa taqabbal du'a'",
                english: "My Lord, make me an establisher of prayer, and from my descendants. Our Lord, and accept my supplication."
            },
            {
                arabic: "ÿ≥Ÿèÿ®Ÿíÿ≠ŸéÿßŸÜŸé ÿßŸÑŸÑŸéŸëŸáŸê ŸàŸéÿ®Ÿêÿ≠ŸéŸÖŸíÿØŸêŸáŸê ÿå ÿ≥Ÿèÿ®Ÿíÿ≠ŸéÿßŸÜŸé ÿßŸÑŸÑŸéŸëŸáŸê ÿßŸÑŸíÿπŸéÿ∏ŸêŸäŸÖŸê",
                transliteration: "Subhan-Allahi wa bihamdihi, Subhan-Allahil-Azim",
                english: "Glory be to Allah and His is the praise, Glory be to Allah the Greatest."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ£ŸÜÿ™ ÿ±ÿ®Ÿä ŸÑÿß ÿ•ŸÑŸá ÿ•ŸÑÿß ÿ£ŸÜÿ™ ÿÆŸÑŸÇÿ™ŸÜŸä Ÿàÿ£ŸÜÿß ÿπÿ®ÿØŸÉ Ÿàÿ£ŸÜÿß ÿπŸÑŸâ ÿπŸáÿØŸÉ ŸàŸàÿπÿØŸÉ ŸÖÿß ÿßÿ≥ÿ™ÿ∑ÿπÿ™",
                transliteration: "Allahumma Anta Rabbi la ilaha illa Anta, khalaqtani wa ana 'abduka, wa ana 'ala 'ahdika wa wa'dika ma-stata'tu",
                english: "O Allah, You are my Lord, none has the right to be worshipped but You. You created me and I am Your slave, and I am faithful to my covenant and my promise as much as I can."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ•ŸÜŸä ÿ£ÿ≥ÿ£ŸÑŸÉ ÿßŸÑÿπŸÅŸà ŸàÿßŸÑÿπÿßŸÅŸäÿ© ŸÅŸä ÿßŸÑÿØŸÜŸäÿß ŸàÿßŸÑÿ¢ÿÆÿ±ÿ©",
                transliteration: "Allahumma inni as'alukal-'afwa wal-'afiyah fid-dunya wal-akhirah",
                english: "O Allah, I ask You for forgiveness and well-being in this world and the Hereafter."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ŸÖÿµÿ±ŸÅ ÿßŸÑŸÇŸÑŸàÿ® ÿµÿ±ŸÅ ŸÇŸÑŸàÿ®ŸÜÿß ÿπŸÑŸâ ÿ∑ÿßÿπÿ™ŸÉ",
                transliteration: "Allahumma musarrifal-qulubi sarrif qulubana 'ala ta'atik",
                english: "O Allah, Turner of the hearts, turn our hearts to Your obedience."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ•ŸÜŸä ÿ£ÿπŸàÿ∞ ÿ®ŸÉ ŸÖŸÜ ÿ≤ŸàÿßŸÑ ŸÜÿπŸÖÿ™ŸÉÿå Ÿàÿ™ÿ≠ŸàŸÑ ÿπÿßŸÅŸäÿ™ŸÉÿå ŸàŸÅÿ¨ÿßÿ°ÿ© ŸÜŸÇŸÖÿ™ŸÉÿå Ÿàÿ¨ŸÖŸäÿπ ÿ≥ÿÆÿ∑ŸÉ",
                transliteration: "Allahumma inni a'udhu bika min zawali ni'matik, wa tahawwuli 'afiyatik, wa fuja'ati niqmatik, wa jami'i sakhatik",
                english: "O Allah, I seek refuge in You from the withdrawal of Your blessing, the change of Your protection, the suddenness of Your punishment, and all Your displeasure."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿßŸÉŸÅŸÜŸä ÿ®ÿ≠ŸÑÿßŸÑŸÉ ÿπŸÜ ÿ≠ÿ±ÿßŸÖŸÉÿå Ÿàÿ£ÿ∫ŸÜŸÜŸä ÿ®ŸÅÿ∂ŸÑŸÉ ÿπŸÖŸÜ ÿ≥ŸàÿßŸÉ",
                transliteration: "Allahumma-kfi ni bi-halalika 'an haramika, wa aghnini bi-fadlika 'amman siwaka",
                english: "O Allah, suffice me with what You have allowed instead of what You have forbidden, and make me independent of all others besides You."
            },
            {
                arabic: "ÿ±ÿ® ÿßÿ∫ŸÅÿ± ŸÑŸä Ÿàÿ™ÿ® ÿπŸÑŸä ÿ•ŸÜŸÉ ÿ£ŸÜÿ™ ÿßŸÑÿ™Ÿàÿßÿ® ÿßŸÑÿ±ÿ≠ŸäŸÖ",
                transliteration: "Rabbi-ghfir li wa tub 'alayya innaka Antat-Tawwabur-Rahim",
                english: "My Lord, forgive me and accept my repentance, for You are the Accepter of Repentance, the Merciful."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ•ŸÜŸä ÿ£ÿ≥ÿ£ŸÑŸÉ ÿπŸÑŸÖÿßŸã ŸÜÿßŸÅÿπÿßŸãÿå Ÿàÿ±ÿ≤ŸÇÿßŸã ÿ∑Ÿäÿ®ÿßŸãÿå ŸàÿπŸÖŸÑÿßŸã ŸÖÿ™ŸÇÿ®ŸÑÿßŸã",
                transliteration: "Allahumma inni as'aluka 'ilman nafi'an, wa rizqan tayyiban, wa 'amalan mutaqabbalan",
                english: "O Allah, I ask You for beneficial knowledge, goodly provision, and acceptable deeds."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ£ÿπŸÜŸä ÿπŸÑŸâ ÿ∞ŸÉÿ±ŸÉ Ÿàÿ¥ŸÉÿ±ŸÉ Ÿàÿ≠ÿ≥ŸÜ ÿπÿ®ÿßÿØÿ™ŸÉ",
                transliteration: "Allahumma a'inni 'ala dhikrika wa shukrika wa husni 'ibadatik",
                english: "O Allah, help me to remember You, give thanks to You, and worship You in the best way."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ¢ÿ™ ŸÜŸÅÿ≥Ÿä ÿ™ŸÇŸàÿßŸáÿß Ÿàÿ≤ŸÉŸáÿß ÿ£ŸÜÿ™ ÿÆŸäÿ± ŸÖŸÜ ÿ≤ŸÉÿßŸáÿß ÿ£ŸÜÿ™ ŸàŸÑŸäŸáÿß ŸàŸÖŸàŸÑÿßŸáÿß",
                transliteration: "Allahumma ati nafsi taqwaha wa zakkiha Anta khayru man zakkaha Anta Waliyyuha wa Mawlaha",
                english: "O Allah, grant my soul its piety and purify it, for You are the Best of those who purify it. You are its Guardian and its Protector."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ•ŸÜŸä ÿ£ÿπŸàÿ∞ ÿ®ŸÉ ŸÖŸÜ ÿßŸÑŸáŸÖ ŸàÿßŸÑÿ≠ÿ≤ŸÜÿå ŸàÿßŸÑÿπÿ¨ÿ≤ ŸàÿßŸÑŸÉÿ≥ŸÑÿå ŸàÿßŸÑÿ®ÿÆŸÑ ŸàÿßŸÑÿ¨ÿ®ŸÜÿå Ÿàÿ∂ŸÑÿπ ÿßŸÑÿØŸäŸÜÿå Ÿàÿ∫ŸÑÿ®ÿ© ÿßŸÑÿ±ÿ¨ÿßŸÑ",
                transliteration: "Allahumma inni a'udhu bika minal-hammi wal-hazani, wal-'ajzi wal-kasali, wal-bukhli wal-jubni, wa dala'id-dayni wa ghalabatir-rijal",
                english: "O Allah, I seek refuge in You from anxiety and sorrow, from helplessness and laziness, from miserliness and cowardice, from the burden of debt and from being overpowered by men."
            },
            {
                arabic: "ŸÑÿß ÿ•ŸÑŸá ÿ•ŸÑÿß ÿ£ŸÜÿ™ ÿ≥ÿ®ÿ≠ÿßŸÜŸÉ ÿ•ŸÜŸä ŸÉŸÜÿ™ ŸÖŸÜ ÿßŸÑÿ∏ÿßŸÑŸÖŸäŸÜ",
                transliteration: "La ilaha illa Anta Subhanaka inni kuntu minaz-zalimin",
                english: "There is no deity except You; exalted are You. Indeed, I have been of the wrongdoers."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ≠ÿ®ÿ® ÿ•ŸÑŸäŸÜÿß ÿßŸÑÿ•ŸäŸÖÿßŸÜ Ÿàÿ≤ŸäŸÜŸá ŸÅŸä ŸÇŸÑŸàÿ®ŸÜÿßÿå ŸàŸÉÿ±Ÿá ÿ•ŸÑŸäŸÜÿß ÿßŸÑŸÉŸÅÿ± ŸàÿßŸÑŸÅÿ≥ŸàŸÇ ŸàÿßŸÑÿπÿµŸäÿßŸÜ",
                transliteration: "Allahumma habbib ilaynal-imana wa zayyinhu fi qulubina, wa karrih ilaynal-kufra wal-fusuga wal-'isyan",
                english: "O Allah, make faith dear to us and beautify it in our hearts, and make disbelief, wickedness, and disobedience hateful to us."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ•ŸÜŸä ÿ£ÿ≥ÿ£ŸÑŸÉ ÿßŸÑÿ´ÿ®ÿßÿ™ ŸÅŸä ÿßŸÑÿ£ŸÖÿ±ÿå ŸàÿßŸÑÿπÿ≤ŸäŸÖÿ© ÿπŸÑŸâ ÿßŸÑÿ±ÿ¥ÿØ",
                transliteration: "Allahumma inni as'alukat-thubata fil-amri, wal-'azimata 'alar-rushd",
                english: "O Allah, I ask You for steadfastness in the matter and determination upon the right path."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿßÿ¨ÿπŸÑ ŸÅŸä ŸÇŸÑÿ®Ÿä ŸÜŸàÿ±ÿßŸãÿå ŸàŸÅŸä ÿ®ÿµÿ±Ÿä ŸÜŸàÿ±ÿßŸãÿå ŸàŸÅŸä ÿ≥ŸÖÿπŸä ŸÜŸàÿ±ÿßŸãÿå ŸàÿπŸÜ ŸäŸÖŸäŸÜŸä ŸÜŸàÿ±ÿßŸãÿå ŸàÿπŸÜ Ÿäÿ≥ÿßÿ±Ÿä ŸÜŸàÿ±ÿßŸã",
                transliteration: "Allahumma-j'al fi qalbi nuran, wa fi basari nuran, wa fi sam'i nuran, wa 'an yamini nuran, wa 'an yasari nuran",
                english: "O Allah, place light in my heart, light in my sight, light in my hearing, light on my right, and light on my left."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ•ŸÜŸä ÿ£ÿπŸàÿ∞ ÿ®ŸÉ ŸÖŸÜ ÿπÿ∞ÿßÿ® ÿßŸÑŸÜÿßÿ± Ÿàÿπÿ∞ÿßÿ® ÿßŸÑŸÇÿ®ÿ± ŸàŸÅÿ™ŸÜÿ© ÿßŸÑŸÖÿ≠Ÿäÿß ŸàÿßŸÑŸÖŸÖÿßÿ™ ŸàŸÅÿ™ŸÜÿ© ÿßŸÑŸÖÿ≥Ÿäÿ≠ ÿßŸÑÿØÿ¨ÿßŸÑ",
                transliteration: "Allahumma inni a'udhu bika min 'adhabin-nari wa 'adhabil-qabri wa fitnatil-mahya wal-mamati wa fitnatil-masihid-dajjal",
                english: "O Allah, I seek refuge in You from the punishment of the Fire, the punishment of the grave, the trials of life and death, and the trial of the False Messiah."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ•ŸÜŸä ÿ£ÿ≥ÿ£ŸÑŸÉ ŸÖŸÜ ŸÅÿ∂ŸÑŸÉ Ÿàÿ±ÿ≠ŸÖÿ™ŸÉÿå ŸÅÿ•ŸÜŸá ŸÑÿß ŸäŸÖŸÑŸÉŸáÿß ÿ•ŸÑÿß ÿ£ŸÜÿ™",
                transliteration: "Allahumma inni as'aluka min fadlika wa rahmatika, fa-innahu la yamlikuha illa Anta",
                english: "O Allah, I ask You of Your grace and Your mercy, for indeed no one possesses them except You."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ±ÿ® ÿ¨ÿ®ÿ±ŸäŸÑ ŸàŸÖŸäŸÉÿßÿ¶ŸäŸÑ Ÿàÿ•ÿ≥ÿ±ÿßŸÅŸäŸÑÿå ŸÅÿßÿ∑ÿ± ÿßŸÑÿ≥ŸÖÿßŸàÿßÿ™ ŸàÿßŸÑÿ£ÿ±ÿ∂ÿå ÿπÿßŸÑŸÖ ÿßŸÑÿ∫Ÿäÿ® ŸàÿßŸÑÿ¥ŸáÿßÿØÿ©",
                transliteration: "Allahumma Rabba Jibra'ila wa Mika'ila wa Israfila, Fatiras-samawati wal-ardi, 'Alimal-ghaybi wash-shahadah",
                english: "O Allah, Lord of Jibril, Mikhail, and Israfil, Creator of the heavens and the earth, Knower of the unseen and the seen."
            },
            {
                arabic: "Ÿäÿß ÿ≠Ÿä Ÿäÿß ŸÇŸäŸàŸÖ ÿ®ÿ±ÿ≠ŸÖÿ™ŸÉ ÿ£ÿ≥ÿ™ÿ∫Ÿäÿ´ ÿ£ÿµŸÑÿ≠ ŸÑŸä ÿ¥ÿ£ŸÜŸä ŸÉŸÑŸá ŸàŸÑÿß ÿ™ŸÉŸÑŸÜŸä ÿ•ŸÑŸâ ŸÜŸÅÿ≥Ÿä ÿ∑ÿ±ŸÅÿ© ÿπŸäŸÜ",
                transliteration: "Ya Hayyu Ya Qayyumu bi-rahmatika astaghith, aslih li sha'ni kullahu wa la takilni ila nafsi tarfata 'ayn",
                english: "O Ever-Living, O Sustainer, by Your mercy I seek help. Set right all my affairs and do not leave me to myself even for a blink of an eye."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ•ŸÜŸä ÿ£ÿ≥ÿ£ŸÑŸÉ ÿÆŸäÿ± ÿßŸÑŸÖÿ≥ÿ£ŸÑÿ© ŸàÿÆŸäÿ± ÿßŸÑÿØÿπÿßÿ° ŸàÿÆŸäÿ± ÿßŸÑŸÜÿ¨ÿßÿ≠ ŸàÿÆŸäÿ± ÿßŸÑÿπŸÖŸÑ ŸàÿÆŸäÿ± ÿßŸÑÿ´Ÿàÿßÿ®",
                transliteration: "Allahumma inni as'aluka khayral-mas'alati wa khayrad-du'a'i wa khayran-najahi wa khayral-'amali wa khayrat-thawab",
                english: "O Allah, I ask You for the best of requests, the best supplication, the best success, the best action, and the best reward."
            },
            {
                arabic: "ÿ≠ÿ≥ÿ®Ÿä ÿßŸÑŸÑŸá ŸÑÿß ÿ•ŸÑŸá ÿ•ŸÑÿß ŸáŸà ÿπŸÑŸäŸá ÿ™ŸàŸÉŸÑÿ™ ŸàŸáŸà ÿ±ÿ® ÿßŸÑÿπÿ±ÿ¥ ÿßŸÑÿπÿ∏ŸäŸÖ",
                transliteration: "Hasbiy-Allahu la ilaha illa Huwa 'alayhi tawakkaltu wa Huwa Rabbul-'Arshil-'Azim",
                english: "Allah is sufficient for me; there is no deity except Him. Upon Him I have relied, and He is the Lord of the Great Throne."
            },
            {
                arabic: "Ÿäÿß ÿ∞ÿß ÿßŸÑÿ¨ŸÑÿßŸÑ ŸàÿßŸÑÿ•ŸÉÿ±ÿßŸÖ",
                transliteration: "Ya Dhal-Jalali wal-Ikram",
                english: "O Possessor of Majesty and Honor."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿßÿ∫ŸÅÿ± ŸÑÿ≠ŸäŸÜÿß ŸàŸÖŸäÿ™ŸÜÿß Ÿàÿ¥ÿßŸáÿØŸÜÿß Ÿàÿ∫ÿßÿ¶ÿ®ŸÜÿß Ÿàÿµÿ∫Ÿäÿ±ŸÜÿß ŸàŸÉÿ®Ÿäÿ±ŸÜÿß Ÿàÿ∞ŸÉÿ±ŸÜÿß Ÿàÿ£ŸÜÿ´ÿßŸÜÿß",
                transliteration: "Allahumma-ghfir li hayyina wa mayyitina wa shahidina wa gha'ibina wa saghirina wa kabirina wa dhakarina wa unthana",
                english: "O Allah, forgive our living and our dead, those present and those absent, our young and our old, our males and our females."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ•ŸÜŸä ÿ£ÿ≥ÿ£ŸÑŸÉ ÿ£ŸÜ ÿ™ÿ®ÿßÿ±ŸÉ ŸÑŸä ŸÅŸä ŸÜŸÅÿ≥Ÿäÿå ŸàŸÅŸä ÿ≥ŸÖÿπŸäÿå ŸàŸÅŸä ÿ®ÿµÿ±Ÿäÿå ŸàŸÅŸä ÿ±Ÿàÿ≠Ÿäÿå ŸàŸÅŸä ÿÆŸÑŸÇŸä",
                transliteration: "Allahumma inni as'aluka an tubarika li fi nafsi, wa fi sam'i, wa fi basari, wa fi ruhi, wa fi khulqi",
                english: "O Allah, I ask You to bless me in myself, in my hearing, in my sight, in my soul, and in my character."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ•ŸÜŸä ÿ£ÿπŸàÿ∞ ÿ®ÿ±ÿ∂ÿßŸÉ ŸÖŸÜ ÿ≥ÿÆÿ∑ŸÉÿå Ÿàÿ®ŸÖÿπÿßŸÅÿßÿ™ŸÉ ŸÖŸÜ ÿπŸÇŸàÿ®ÿ™ŸÉ",
                transliteration: "Allahumma inni a'udhu bi-ridaka min sakhatika, wa bi-mu'afatika min 'uqubatika",
                english: "O Allah, I seek refuge in Your pleasure from Your wrath, and in Your forgiveness from Your punishment."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ£ŸÜÿ™ ÿßŸÑÿ≥ŸÑÿßŸÖ ŸàŸÖŸÜŸÉ ÿßŸÑÿ≥ŸÑÿßŸÖ ÿ™ÿ®ÿßÿ±ŸÉÿ™ Ÿäÿß ÿ∞ÿß ÿßŸÑÿ¨ŸÑÿßŸÑ ŸàÿßŸÑÿ•ŸÉÿ±ÿßŸÖ",
                transliteration: "Allahumma Antas-Salamu wa minkas-salam, tabarakta ya Dhal-Jalali wal-Ikram",
                english: "O Allah, You are Peace and from You comes peace. Blessed are You, O Possessor of Majesty and Honor."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ŸÑŸÉ ÿßŸÑÿ≠ŸÖÿØ ŸÉŸÑŸáÿå ÿßŸÑŸÑŸáŸÖ ŸÑÿß ŸÇÿßÿ®ÿ∂ ŸÑŸÖÿß ÿ®ÿ≥ÿ∑ÿ™ÿå ŸàŸÑÿß ÿ®ÿßÿ≥ÿ∑ ŸÑŸÖÿß ŸÇÿ®ÿ∂ÿ™",
                transliteration: "Allahumma lakal-hamdu kullu-hu, Allahumma la qabida lima basatta, wa la basita lima qabadta",
                english: "O Allah, all praise is for You. O Allah, there is no withholder of what You spread, and no spreader of what You withhold."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ•ŸÜŸä ÿ£ÿπŸàÿ∞ ÿ®ŸÉ ŸÖŸÜ ÿ¥ÿ± ŸÖÿß ÿπŸÖŸÑÿ™ÿå ŸàŸÖŸÜ ÿ¥ÿ± ŸÖÿß ŸÑŸÖ ÿ£ÿπŸÖŸÑ",
                transliteration: "Allahumma inni a'udhu bika min sharri ma 'amiltu, wa min sharri ma lam a'mal",
                english: "O Allah, I seek refuge in You from the evil of what I have done and from the evil of what I have not yet done."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿßŸáÿØŸÜŸä ŸÅŸäŸÖŸÜ ŸáÿØŸäÿ™ÿå ŸàÿπÿßŸÅŸÜŸä ŸÅŸäŸÖŸÜ ÿπÿßŸÅŸäÿ™ÿå Ÿàÿ™ŸàŸÑŸÜŸä ŸÅŸäŸÖŸÜ ÿ™ŸàŸÑŸäÿ™",
                transliteration: "Allahumma-hdini fiman hadayt, wa 'afini fiman 'afayt, wa tawallani fiman tawallayt",
                english: "O Allah, guide me among those You have guided, grant me well-being among those You have granted well-being, and protect me among those You have protected."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ®ÿßÿ±ŸÉ ŸÑŸä ŸÅŸäŸÖÿß ÿ£ÿπÿ∑Ÿäÿ™ÿå ŸàŸÇŸÜŸä ÿ¥ÿ± ŸÖÿß ŸÇÿ∂Ÿäÿ™",
                transliteration: "Allahumma barik li fima a'tayt, wa qini sharra ma qadayt",
                english: "O Allah, bless me in what You have given, and protect me from the evil of what You have decreed."
            },
            {
                arabic: "ÿ±ÿ®ŸÜÿß ŸÑÿß ÿ™ÿ§ÿßÿÆÿ∞ŸÜÿß ÿ•ŸÜ ŸÜÿ≥ŸäŸÜÿß ÿ£Ÿà ÿ£ÿÆÿ∑ÿ£ŸÜÿß",
                transliteration: "Rabbana la tu'akhidhna in-nasina aw akhta'na",
                english: "Our Lord, do not impose blame upon us if we have forgotten or erred."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ•ŸÜŸä ÿ£ÿ≥ÿ£ŸÑŸÉ ÿ•ŸäŸÖÿßŸÜÿßŸã ŸÑÿß Ÿäÿ±ÿ™ÿØÿå ŸàŸÜÿπŸäŸÖÿßŸã ŸÑÿß ŸäŸÜŸÅÿØ",
                transliteration: "Allahumma inni as'aluka imanan la yartaddu, wa na'iman la yanfadu",
                english: "O Allah, I ask You for faith that does not waver and bliss that does not end."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ•ŸÜŸä ÿ£ÿ≥ÿ£ŸÑŸÉ ÿßŸÑÿ¨ŸÜÿ©ÿå Ÿàÿ£ÿ≥ÿ™ÿ¨Ÿäÿ± ÿ®ŸÉ ŸÖŸÜ ÿßŸÑŸÜÿßÿ±",
                transliteration: "Allahumma inni as'alukal-jannata, wa astajiru bika minan-nari",
                english: "O Allah, I ask You for Paradise and I seek refuge in You from the Fire."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ•ŸÜŸä ÿ£ÿ≥ÿ£ŸÑŸÉ ÿ≠ÿ≥ŸÜ ÿßŸÑÿÆÿßÿ™ŸÖÿ©",
                transliteration: "Allahumma inni as'aluka husnal-khatimah",
                english: "O Allah, I ask You for a good end (to my life)."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿßÿ±ÿ≤ŸÇŸÜŸä ÿ™Ÿàÿ®ÿ© ŸÇÿ®ŸÑ ÿßŸÑŸÖŸàÿ™",
                transliteration: "Allahumma-rzuqni tawbatan qablal-mawt",
                english: "O Allah, grant me repentance before death."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ´ÿ®ÿ™ŸÜŸä ÿπŸÜÿØ ÿßŸÑÿ≥ÿ§ÿßŸÑ",
                transliteration: "Allahumma thabbitni 'indas-su'al",
                english: "O Allah, keep me firm during the questioning (in the grave)."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿßŸÜŸÅÿπŸÜŸä ÿ®ŸÖÿß ÿπŸÑŸÖÿ™ŸÜŸäÿå ŸàÿπŸÑŸÖŸÜŸä ŸÖÿß ŸäŸÜŸÅÿπŸÜŸäÿå Ÿàÿ≤ÿØŸÜŸä ÿπŸÑŸÖÿßŸã",
                transliteration: "Allahumma-nfa'ni bima 'allamtani, wa 'allimni ma yanfa'uni, wa zidni 'ilman",
                english: "O Allah, benefit me with what You have taught me, teach me what will benefit me, and increase me in knowledge."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ£ÿπŸÜŸä ÿπŸÑŸâ ÿ∞ŸÉÿ±ŸÉ Ÿàÿ¥ŸÉÿ±ŸÉ Ÿàÿ≠ÿ≥ŸÜ ÿπÿ®ÿßÿØÿ™ŸÉ",
                transliteration: "Allahumma a'inni 'ala dhikrika wa shukrika wa husni 'ibadatik",
                english: "O Allah, help me to remember You, to thank You, and to worship You in the best way."
            },
            {
                arabic: "ÿßŸÑŸÑŸáŸÖ ÿ•ŸÜŸä ÿ£ÿ≥ÿ£ŸÑŸÉ ÿßŸÑÿ¨ŸÜÿ© ÿ®ÿ∫Ÿäÿ± ÿ≠ÿ≥ÿßÿ®",
                transliteration: "Allahumma inni as'alukal-jannata bighayri hisab",
                english: "O Allah, I ask You for Paradise without account."
            }
        ];
        const TRANSLATIONS = {
            en: {
                mainTitle: "üåô Ramadan Companion",
                mainSubtitle: "Your daily spiritual guide",
                dayLabel: "Ramadan Day",
                dayOf30: "of 30 days",
                notRamadan: "Ramadan is not active yet.",
                days: "days",
                browseDuas: "Browse Duas",
                progress: "Ramadan Progress",
                duaForDay: "Dua for Day",
                browseAll: "Browse All Duas",
                prevDay: "‚Üê Previous Day",
                today: "üìÖ Today",
                nextDay: "Next Day ‚Üí",
                notifTitle: "üîî Daily Reminders",
                remindAt: "Remind me at:",
                save: "Save",
                prayerTimes: "üïå Prayer Times",
                nextPrayer: "Next Prayer",
                savePrayers: "üíæ Save Prayer Times",
                notes: "üìù Personal Notes & Reminders",
                notePlaceholder: "Enter your note (e.g., Read Surah Kahf)",
                addNote: "Add Note",
                quran: "üìñ Daily Quran Ayahs",
                fullQuran: "üìñ Full Quran",
                home: "üè† Home",
                prev: "‚Üê Previous",
                next: "Next ‚Üí",
                footerMubarak: "Ramadan Mubarak! ü§≤",
                footerMadeWith: "Made with ‚ù§Ô∏è for you",
                noNotes: "No notes yet. Add one above! ‚ú®",
                in: "in",
                hours: "h",
                minutes: "m",
                minutesFull: "minutes",
                fajr: "Fajr",
                dhuhr: "Dhuhr",
                asr: "Asr",
                isha: "ÿßŸÑÿπÿ¥ÿßÿ°",
                recipes: "üç≥ Recipes",
                recipesTitle: "üç≥ Ramadan Kitchen",
                recipesSubtitle: "Authentic Middle Eastern flavors for your Ramadan.",
                breakfast: "Breakfast (Suhoor)",
                lunch: "Iftar (Main Dish)",
                dinner: "Dinner",
                dessert: "Dessert",
                notifEnabled: "‚úÖ Notifications enabled! Set your reminder time.",
                notifUnsupported: "‚ùå Your browser doesn't support notifications.",
                notifDenied: "‚ùå Please allow notifications in your browser settings.",
                reminderSet: "‚úÖ Reminder set for",
                detectLoc: "Detect Location",
                detecting: "Detecting...",
                locSuccess: "Location detected: ",
                locError: "Error detecting location. Try again.",
                geoDenied: "Please allow location access.",
                timesUpdated: "Prayer times updated!",
                method: "Calculation Method:",
                madhab: "Asr Method (Madhab):",

                sadaqahTitle: "üíù Sadaqah Planner",
                sadaqahSubtitle: "Enter your age for personalized charity ideas.",
                sadaqahBtn: "Get Recommendations",
                agePlaceholder: "Your Age",
                sadaqahKids: ["Smile at everyone you meet today", "Help set up the Iftar table with dates", "Feed a stray cat or bird", "Be extra kind to your siblings", "Make a hand-made Ramadan card for your teacher", "Tidy up your toys without being asked", "Help your parents prepare a simple dish", "Share your favorite snack with a friend", "Say 'Thank you' and 'Jazakallah' to everyone", "Read a short story about the Prophets", "Give one of your toys to a younger child", "Help clear the table after Iftar", "Water the plants in your house", "Make a drawing for your grandparents", "Help your mom bake something sweet"],
                sadaqahTeens: ["Volunteer at a local food bank", "Prepare a special dish for neighbors", "Teach someone a verse of Quran", "Set up the prayer corner at home", "Distribute water bottles at the Masjid during Tarawih", "Write a blog post or social media post about Ramadan", "Organize a small donation drive among friends", "Help your younger siblings with their studies", "Prepare an info sheet about Ramadan for non-Muslim friends", "Offer to do the grocery shopping for an elderly neighbor", "Lead a short discussion after Iftar about a Hadith", "Visit a local hospital or nursing home", "Help clean the Masjid prayer area", "Host a 'virtue of the night' talk with friends", "Donate a book to a community library"],
                sadaqahAdults: ["Setup a recurring charity donation", "Pay Zakat-ul-Fitr early for your family", "Host an Iftar for someone in need", "Sponsor a water well in a developing country", "Donate your professional skills to a charity for free", "Buy a meal for a homeless person", "Gift a Quran translation to a colleague", "Offer a ride to someone going to the Masjid", "Support a local community project", "Pay off a small debt for a friend in hardship", "Provide dates and water for a public Iftar", "Mentor a young person in your field", "Help a family in your community with their house bills", "Donate blood if you are healthy", "Clean a public space or park in your neighborhood"],
                sadaqahSeniors: ["Share stories of faith with grandchildren", "Call a relative you haven't spoken to in a long time", "Sponsor an Iftar for an orphan", "Write down your life lessons and wisdom for your family", "Gift your favorite Islamic books to a student", "Teach a child how to perform Wudu correctly", "Sew or mend clothes for those in need", "Donate to an Islamic education center", "Host a small Halaqa (gathering) for neighbors", "Share home-cooked meals with your community", "Offer advice to young couples or parents", "Support a local garden or green space", "Donate hand-crafted items to a charity auction", "Pray for the entire Ummah during the last ten nights", "Gift prayer beads or a prayer mat to a new Muslim"]
            },
            ar: {
                mainTitle: "üåô ÿ±ŸÅŸäŸÇ ÿ±ŸÖÿ∂ÿßŸÜ",
                mainSubtitle: "ÿØŸÑŸäŸÑŸÉ ÿßŸÑÿ±Ÿàÿ≠Ÿä ÿßŸÑŸäŸàŸÖŸä",
                dayLabel: "ŸäŸàŸÖ ÿ±ŸÖÿ∂ÿßŸÜ",
                dayOf30: "ŸÖŸÜ Ÿ£Ÿ† ŸäŸàŸÖÿßŸã",
                notRamadan: "ÿ±ŸÖÿ∂ÿßŸÜ ŸÑŸÖ Ÿäÿ®ÿØÿ£ ÿ®ÿπÿØ.",
                days: "ŸäŸàŸÖ",
                browseDuas: "ÿ™ÿµŸÅÿ≠ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿØÿπŸäÿ©",
                progress: "ÿ™ŸÇÿØŸÖ ÿ±ŸÖÿ∂ÿßŸÜ",
                duaForDay: "ÿØÿπÿßÿ° ÿßŸÑŸäŸàŸÖ",
                browseAll: "ÿ™ÿµŸÅÿ≠ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿØÿπŸäÿ©",
                prevDay: "ÿßŸÑÿØÿπÿßÿ° ÿßŸÑÿ≥ÿßÿ®ŸÇ ‚Üí",
                today: "üìÖ ÿßŸÑŸäŸàŸÖ",
                nextDay: "‚Üê ÿßŸÑÿØÿπÿßÿ° ÿßŸÑÿ™ÿßŸÑŸä",
                notifTitle: "üîî ÿ™ÿ∞ŸÉŸäÿ±ÿßÿ™ ŸäŸàŸÖŸäÿ©",
                remindAt: "ÿ∞ŸÉÿ±ŸÜŸä ŸÅŸä:",
                save: "ÿ≠ŸÅÿ∏",
                prayerTimes: "üïå ŸÖŸàÿßŸÇŸäÿ™ ÿßŸÑÿµŸÑÿßÿ©",
                nextPrayer: "ÿßŸÑÿµŸÑÿßÿ© ÿßŸÑŸÇÿßÿØŸÖÿ©",
                savePrayers: "üíæ ÿ≠ŸÅÿ∏ ŸÖŸàÿßŸÇŸäÿ™ ÿßŸÑÿµŸÑÿßÿ©",
                notes: "üìù ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ Ÿàÿ™ÿ∞ŸÉŸäÿ±ÿßÿ™ ÿ¥ÿÆÿµŸäÿ©",
                notePlaceholder: "ÿ£ÿØÿÆŸÑ ŸÖŸÑÿßÿ≠ÿ∏ÿ™ŸÉ (ŸÖÿ´ŸÑÿßŸã: ŸÇÿ±ÿßÿ°ÿ© ÿ≥Ÿàÿ±ÿ© ÿßŸÑŸÉŸáŸÅ)",
                addNote: "ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÑÿßÿ≠ÿ∏ÿ©",
                quran: "üìñ ÿ¢Ÿäÿßÿ™ ŸÇÿ±ÿ¢ŸÜŸäÿ© ŸäŸàŸÖŸäÿ©",
                fullQuran: "üìñ ÿßŸÑŸÖÿµÿ≠ŸÅ ÿßŸÑŸÉÿßŸÖŸÑ",
                home: "üè† ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",
                prev: "ÿßŸÑÿ≥ÿßÿ®ŸÇ ‚Üí",
                next: "‚Üê ÿßŸÑÿ™ÿßŸÑŸä",
                footerMubarak: "ÿ±ŸÖÿ∂ÿßŸÜ ŸÖÿ®ÿßÿ±ŸÉ! ü§≤",
                footerMadeWith: "ÿµŸÜÿπ ÿ®ŸÇŸÑÿ® ‚ù§Ô∏è ŸÖŸÜ ÿ£ÿ¨ŸÑŸÉ",
                noNotes: "ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿ®ÿπÿØ. ÿ£ÿ∂ŸÅ Ÿàÿßÿ≠ÿØÿ© ÿ£ÿπŸÑÿßŸá! ‚ú®",
                in: "ÿÆŸÑÿßŸÑ",
                hours: "ÿ≥",
                minutes: "ÿØ",
                minutesFull: "ÿØŸÇŸäŸÇÿ©",
                fajr: "ÿßŸÑŸÅÿ¨ÿ±",
                dhuhr: "ÿßŸÑÿ∏Ÿáÿ±",
                asr: "ÿßŸÑÿπÿµÿ±",
                maghrib: "ÿßŸÑŸÖÿ∫ÿ±ÿ®",
                isha: "ÿßŸÑÿπÿ¥ÿßÿ°",
                recipes: "üç≥ ŸàÿµŸÅÿßÿ™",
                recipesTitle: "üç≥ ŸÖÿ∑ÿ®ÿÆ ÿ±ŸÖÿ∂ÿßŸÜ",
                recipesSubtitle: "ŸÜŸÉŸáÿßÿ™ ÿ¥ÿ±ŸÇ ÿ£Ÿàÿ≥ÿ∑Ÿäÿ© ÿ£ÿµŸäŸÑÿ© ŸÑŸÖÿßÿ¶ÿØÿ™ŸÉŸÖ ÿßŸÑÿ±ŸÖÿ∂ÿßŸÜŸäÿ©.",
                breakfast: "ÿßŸÑÿ≥ÿ≠Ÿàÿ±",
                lunch: "ŸÅÿ™ÿ≠ÿ© ÿßŸÑÿµŸäÿßŸÖ (ÿ±ÿ¶Ÿäÿ≥Ÿä)",
                dinner: "ÿßŸÑÿπÿ¥ÿßÿ°",
                dessert: "ÿßŸÑÿ≠ŸÑŸàŸäÿßÿ™",
                notifEnabled: "‚úÖ ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ™ŸÜÿ®ŸäŸáÿßÿ™! ÿ≠ÿØÿØ ŸàŸÇÿ™ ÿßŸÑÿ™ÿ∞ŸÉŸäÿ±.",
                notifUnsupported: "‚ùå ŸÖÿ™ÿµŸÅÿ≠ŸÉ ŸÑÿß ŸäÿØÿπŸÖ ÿßŸÑÿ™ŸÜÿ®ŸäŸáÿßÿ™.",
                notifDenied: "‚ùå Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ≥ŸÖÿßÿ≠ ÿ®ÿßŸÑÿ™ŸÜÿ®ŸäŸáÿßÿ™ ŸÅŸä ÿ•ÿπÿØÿßÿØÿßÿ™ ŸÖÿ™ÿµŸÅÿ≠ŸÉ.",
                reminderSet: "‚úÖ ÿ™ŸÖ ÿ∂ÿ®ÿ∑ ÿßŸÑÿ™ÿ∞ŸÉŸäÿ± ŸÅŸä ÿßŸÑÿ≥ÿßÿπÿ©",
                detectLoc: "ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ",
                detecting: "ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ÿØŸäÿØ...",
                locSuccess: "ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ: ",
                locError: "ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ. ÿ≠ÿßŸàŸÑ ÿ´ÿßŸÜŸäÿ©.",
                geoDenied: "Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ≥ŸÖÿßÿ≠ ÿ®ÿßŸÑŸàÿµŸàŸÑ ŸÑŸÑŸÖŸàŸÇÿπ.",
                timesUpdated: "ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ŸÖŸàÿßŸÇŸäÿ™ ÿßŸÑÿµŸÑÿßÿ©!",
                method: "ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿ≠ÿ≥ÿßÿ®:",
                madhab: "ŸÖÿ∞Ÿáÿ® ÿµŸÑÿßÿ© ÿßŸÑÿπÿµÿ±:",

                sadaqahTitle: "üíù ŸÖÿÆÿ∑ÿ∑ ÿßŸÑÿµÿØŸÇÿ©",
                sadaqahSubtitle: "ÿ£ÿØÿÆŸÑ ÿπŸÖÿ±ŸÉ ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿ£ŸÅŸÉÿßÿ± ÿµÿØŸÇÿ© ŸÖÿÆÿµÿµÿ©.",
                sadaqahBtn: "ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ÿßŸÑŸÜÿµÿßÿ¶ÿ≠",
                agePlaceholder: "ÿπŸÖÿ±ŸÉ",
                sadaqahKids: ["ÿßÿ®ÿ™ÿ≥ŸÖ ŸÅŸä Ÿàÿ¨Ÿá ŸÉŸÑ ŸÖŸÜ ÿ™ŸÇÿßÿ®ŸÑŸá ÿßŸÑŸäŸàŸÖ", "ÿ≥ÿßÿπÿØ ŸÅŸä ÿ™ÿ¨ŸáŸäÿ≤ ŸÖÿßÿ¶ÿØÿ© ÿßŸÑÿ•ŸÅÿ∑ÿßÿ± ÿ®ÿßŸÑÿ™ŸÖÿ±", "ÿ£ÿ∑ÿπŸÖ ŸÇÿ∑ÿ© ÿ£Ÿà ÿ∑ÿßÿ¶ÿ±ÿßŸã ŸÅŸä ÿßŸÑÿ¥ÿßÿ±ÿπ", "ŸÉŸÜ ŸÑÿ∑ŸäŸÅÿßŸã ÿ¨ÿØÿßŸã ŸÖÿπ ÿ•ÿÆŸàÿ™ŸÉ ÿßŸÑŸäŸàŸÖ", "ÿßÿµŸÜÿπ ÿ®ÿ∑ÿßŸÇÿ© ÿ™ŸáŸÜÿ¶ÿ© ÿ±ŸÖÿ∂ÿßŸÜŸäÿ© ŸÑŸÖÿπŸÑŸÖŸÉ", "ÿ±ÿ™ÿ® ÿ£ŸÑÿπÿßÿ®ŸÉ ÿØŸàŸÜ ÿ£ŸÜ Ÿäÿ∑ŸÑÿ® ŸÖŸÜŸÉ ÿ£ÿ≠ÿØ", "ÿ≥ÿßÿπÿØ ŸàÿßŸÑÿØŸäŸÉ ŸÅŸä ÿ™ÿ≠ÿ∂Ÿäÿ± ÿ∑ÿ®ŸÇ ÿ®ÿ≥Ÿäÿ∑", "ÿ¥ÿßÿ±ŸÉ Ÿàÿ¨ÿ®ÿ™ŸÉ ÿßŸÑÿÆŸÅŸäŸÅÿ© ÿßŸÑŸÖŸÅÿ∂ŸÑÿ© ŸÖÿπ ÿµÿØŸäŸÇ", "ŸÇŸÑ 'ÿ¥ŸÉÿ±ÿßŸã' Ÿà 'ÿ¨ÿ≤ÿßŸÉ ÿßŸÑŸÑŸá ÿÆŸäÿ±ÿßŸã' ŸÑŸÑÿ¨ŸÖŸäÿπ", "ÿßŸÇÿ±ÿ£ ŸÇÿµÿ© ŸÇÿµŸäÿ±ÿ© ÿπŸÜ ÿßŸÑÿ£ŸÜÿ®Ÿäÿßÿ°", "ÿ£ÿπÿ∑Ÿê ÿ•ÿ≠ÿØŸâ ÿ£ŸÑÿπÿßÿ®ŸÉ ŸÑÿ∑ŸÅŸÑ ÿ£ÿµÿ∫ÿ± ŸÖŸÜŸÉ", "ÿ≥ÿßÿπÿØ ŸÅŸä ÿ™ŸÜÿ∏ŸäŸÅ ÿßŸÑŸÖÿßÿ¶ÿØÿ© ÿ®ÿπÿØ ÿßŸÑÿ•ŸÅÿ∑ÿßÿ±", "ÿßÿ≥ŸÇŸê ÿßŸÑŸÜÿ®ÿßÿ™ÿßÿ™ ŸÅŸä ŸÖŸÜÿ≤ŸÑŸÉ", "ÿßÿ±ÿ≥ŸÖ ŸÑŸàÿ≠ÿ© ÿ¨ŸÖŸäŸÑÿ© ŸÑÿ¨ÿØŸäŸÉ", "ÿ≥ÿßÿπÿØ ŸàÿßŸÑÿØÿ™ŸÉ ŸÅŸä ÿÆÿ®ÿ≤ ÿ¥Ÿäÿ° ÿ≠ŸÑŸà"],
                sadaqahTeens: ["ÿ™ÿ∑Ÿàÿπ ŸÅŸä ÿ®ŸÜŸÉ ÿßŸÑÿ∑ÿπÿßŸÖ ÿßŸÑŸÖÿ≠ŸÑŸä", "ÿ¨Ÿáÿ≤ ÿ∑ÿ®ŸÇÿßŸã ŸÖŸÖŸäÿ≤ÿßŸã ŸÑŸÑÿ¨Ÿäÿ±ÿßŸÜ", "ÿπŸÑŸÖ ÿ¥ÿÆÿµÿßŸã ÿ¢Ÿäÿ© ŸÖŸÜ ÿßŸÑŸÇÿ±ÿ¢ŸÜ", "ÿ±ÿ™ÿ® ÿ±ŸÉŸÜÿßŸã ŸÑŸÑÿµŸÑÿßÿ© ŸÅŸä ÿßŸÑŸÖŸÜÿ≤ŸÑ", "Ÿàÿ≤ÿπ ÿ≤ÿ¨ÿßÿ¨ÿßÿ™ ÿßŸÑŸÖŸäÿßŸá ŸÅŸä ÿßŸÑŸÖÿ≥ÿ¨ÿØ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ™ÿ±ÿßŸàŸäÿ≠", "ÿßŸÉÿ™ÿ® ŸÖŸÜÿ¥Ÿàÿ±ÿßŸã ÿπŸÜ ŸÅÿ∂ÿßÿ¶ŸÑ ÿ±ŸÖÿ∂ÿßŸÜ ÿπŸÑŸâ Ÿàÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿ™ŸàÿßÿµŸÑ", "ŸÜÿ∏ŸÖ ÿ≠ŸÖŸÑÿ© ÿ™ÿ®ÿ±ÿπÿßÿ™ ÿµÿ∫Ÿäÿ±ÿ© ÿ®ŸäŸÜ ÿ£ÿµÿØŸÇÿßÿ¶ŸÉ", "ÿ≥ÿßÿπÿØ ÿ•ÿÆŸàÿ™ŸÉ ÿßŸÑÿµÿ∫ÿßÿ± ŸÅŸä ÿØÿ±Ÿàÿ≥ŸáŸÖ", "ÿ¨Ÿáÿ≤ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿπŸÜ ÿ±ŸÖÿ∂ÿßŸÜ ŸÑÿ£ÿµÿØŸÇÿßÿ¶ŸÉ ÿ∫Ÿäÿ± ÿßŸÑŸÖÿ≥ŸÑŸÖŸäŸÜ", "ÿßÿπÿ±ÿ∂ ÿßŸÑÿ∞Ÿáÿßÿ® ŸÑŸÑÿ™ÿ≥ŸàŸÇ ŸÑÿ¨ÿßÿ± ŸÖÿ≥ŸÜ", "ŸÇŸèÿØ ŸÜŸÇÿßÿ¥ÿßŸã ŸÇÿµŸäÿ±ÿßŸã ÿ®ÿπÿØ ÿßŸÑÿ•ŸÅÿ∑ÿßÿ± ÿ≠ŸàŸÑ ÿ≠ÿØŸäÿ´ ÿ¥ÿ±ŸäŸÅ", "ÿ≤ÿ± ŸÖÿ≥ÿ™ÿ¥ŸÅŸâ ŸÖÿ≠ŸÑŸäÿßŸã ÿ£Ÿà ÿØÿßÿ±ÿßŸã ŸÑŸÑŸÖÿ≥ŸÜŸäŸÜ", "ÿ≥ÿßÿπÿØ ŸÅŸä ÿ™ŸÜÿ∏ŸäŸÅ ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿµŸÑÿßÿ© ÿ®ÿßŸÑŸÖÿ≥ÿ¨ÿØ", "ÿßÿ≥ÿ™ÿ∂ŸÅ ÿ¨ŸÑÿ≥ÿ© ÿπŸÜ 'ŸÅÿ∂ÿßÿ¶ŸÑ ÿßŸÑŸÑŸäŸÑ' ŸÖÿπ ÿ±ŸÅÿßŸÇŸÉ", "ÿ™ÿ®ÿ±ÿπ ÿ®ŸÉÿ™ÿßÿ® ŸÑŸÖŸÉÿ™ÿ®ÿ© ÿßŸÑŸÖÿ¨ÿ™ŸÖÿπ ÿßŸÑŸÖÿ≠ŸÑŸä"],
                sadaqahAdults: ["ŸÇŸÖ ÿ®ÿ•ÿπÿØÿßÿØ ÿ™ÿ®ÿ±ÿπ ÿÆŸäÿ±Ÿä ÿØŸàÿ±Ÿä", "ÿßÿØŸÅÿπ ÿ≤ŸÉÿßÿ© ÿßŸÑŸÅÿ∑ÿ± ŸÖÿ®ŸÉÿ±ÿßŸã ÿπŸÜ ÿπÿßÿ¶ŸÑÿ™ŸÉ", "ÿßÿ≥ÿ™ÿ∂ŸÅ ŸÖÿ£ÿØÿ®ÿ© ÿ•ŸÅÿ∑ÿßÿ± ŸÑÿ¥ÿÆÿµ ŸÖÿ≠ÿ™ÿßÿ¨", "ÿ≥ÿßŸáŸÖ ŸÅŸä ÿ≠ŸÅÿ± ÿ®ÿ¶ÿ± ŸÖŸäÿßŸá ŸÅŸä ÿ®ŸÑÿØ ŸÜÿßŸÖŸç", "ÿ™ÿ®ÿ±ÿπ ÿ®ŸÖŸáÿßÿ±ÿßÿ™ŸÉ ÿßŸÑŸÖŸáŸÜŸäÿ© ŸÑÿ¨ŸÖÿπŸäÿ© ÿÆŸäÿ±Ÿäÿ© ŸÖÿ¨ÿßŸÜÿßŸã", "ÿßÿ¥ÿ™ÿ±Ÿê Ÿàÿ¨ÿ®ÿ© ŸÑÿ¥ÿÆÿµ ŸÖÿ≠ÿ™ÿßÿ¨", "ÿßŸáÿØŸê ÿ™ÿ±ÿ¨ŸÖÿ© ŸÑŸÑŸÇÿ±ÿ¢ŸÜ ŸÑÿ≤ŸÖŸäŸÑ ŸÅŸä ÿßŸÑÿπŸÖŸÑ", "ÿ£ŸàÿµŸÑ ÿ¥ÿÆÿµÿßŸã ÿ•ŸÑŸâ ÿßŸÑŸÖÿ≥ÿ¨ÿØ ÿ®ÿ≥Ÿäÿßÿ±ÿ™ŸÉ", "ÿßÿØÿπŸÖ ŸÖÿ¥ÿ±ŸàÿπÿßŸã ŸÖÿ¨ÿ™ŸÖÿπŸäÿßŸã ŸÖÿ≠ŸÑŸäÿßŸã", "ÿ≥ÿØÿØ ÿØŸäŸÜÿßŸã ÿµÿ∫Ÿäÿ±ÿßŸã ÿπŸÜ ÿµÿØŸäŸÇ ÿ∫ÿßÿ±ŸÇ ŸÅŸä ÿ∂ÿßÿ¶ŸÇÿ©", "ŸàŸÅÿ± ÿßŸÑÿ™ŸÖÿ± ŸàÿßŸÑŸÖÿßÿ° ŸÑÿ•ŸÅÿ∑ÿßÿ± ÿπÿßŸÖ", "ŸÉŸÜ ŸÖÿ±ÿ¥ÿØÿßŸã ŸÑÿ¥ÿßÿ® ŸÅŸä ŸÖÿ¨ÿßŸÑ ÿπŸÖŸÑŸÉ", "ÿ≥ÿßÿπÿØ ÿπÿßÿ¶ŸÑÿ© ŸÅŸä ŸÖÿ¨ÿ™ŸÖÿπŸÉ ŸÅŸä ÿØŸÅÿπ ÿßŸÑŸÅŸàÿßÿ™Ÿäÿ±", "ÿ™ÿ®ÿ±ÿπ ÿ®ÿßŸÑÿØŸÖ ÿ•ÿ∞ÿß ŸÉŸÜÿ™ ÿ®ÿµÿ≠ÿ© ÿ¨ŸäÿØÿ©", "ŸÜÿ∏ŸÅ ŸÖŸÉÿßŸÜÿßŸã ÿπÿßŸÖÿßŸã ÿ£Ÿà ÿ≠ÿØŸäŸÇÿ© ŸÅŸä ŸÖŸÜÿ∑ŸÇÿ™ŸÉ"],
                sadaqahSeniors: ["ÿ¥ÿßÿ±ŸÉ ŸÇÿµÿµ ÿßŸÑÿ•ŸäŸÖÿßŸÜ ŸÖÿπ ÿ£ÿ≠ŸÅÿßÿØŸÉ", "ÿßÿ™ÿµŸÑ ÿ®ŸÇÿ±Ÿäÿ® ŸÑŸÖ ÿ™ÿ™ÿ≠ÿØÿ´ ŸÖÿπŸá ŸÖŸÜÿ∞ ŸÅÿ™ÿ±ÿ© ÿ∑ŸàŸäŸÑÿ©", "ŸÉŸÅŸÑ ÿ•ŸÅÿ∑ÿßÿ± Ÿäÿ™ŸäŸÖ", "ÿßŸÉÿ™ÿ® ÿØÿ±Ÿàÿ≥ ÿ≠Ÿäÿßÿ™ŸÉ Ÿàÿ≠ŸÉŸÖŸÉ ŸÑÿπÿßÿ¶ŸÑÿ™ŸÉ", "ÿßŸáÿØŸê ŸÉÿ™ÿ®ŸÉ ÿßŸÑÿ•ÿ≥ŸÑÿßŸÖŸäÿ© ÿßŸÑŸÖŸÅÿ∂ŸÑÿ© ŸÑÿ∑ÿßŸÑÿ® ÿπŸÑŸÖ", "ÿπŸÑŸÖ ÿ∑ŸÅŸÑÿßŸã ŸÉŸäŸÅ Ÿäÿ™Ÿàÿ∂ÿ£ ÿ®ÿ¥ŸÉŸÑ ÿµÿ≠Ÿäÿ≠", "ÿÆŸêÿ∑ ÿ£Ÿà ÿ£ÿµŸÑÿ≠ ŸÖŸÑÿßÿ®ÿ≥ ŸÑŸÑŸÖÿ≠ÿ™ÿßÿ¨ŸäŸÜ", "ÿ™ÿ®ÿ±ÿπ ŸÑŸÖÿ±ŸÉÿ≤ ÿ™ÿπŸÑŸäŸÖ ÿ•ÿ≥ŸÑÿßŸÖŸä", "ÿßÿ≥ÿ™ÿ∂ŸÅ ÿ≠ŸÑŸÇÿ© ÿ∞ŸÉÿ± ÿµÿ∫Ÿäÿ±ÿ© ŸÑŸÑÿ¨Ÿäÿ±ÿßŸÜ", "ÿ¥ÿßÿ±ŸÉ ÿßŸÑŸàÿ¨ÿ®ÿßÿ™ ÿßŸÑŸÖÿ∑ÿ®ŸàÿÆÿ© ŸÅŸä ÿßŸÑŸÖŸÜÿ≤ŸÑ ŸÖÿπ ŸÖŸÜÿ∑ŸÇÿ™ŸÉ", "ŸÇÿØŸÖ ÿßŸÑŸÜÿµŸäÿ≠ÿ© ŸÑŸÑÿ£ÿ≤Ÿàÿßÿ¨ ÿßŸÑÿ¥ÿ®ÿßÿ® ÿ£Ÿà ÿßŸÑŸàÿßŸÑÿØŸäŸÜ", "ÿßÿØÿπŸÖ ÿ≠ÿØŸäŸÇÿ© ŸÖÿ≠ŸÑŸäÿ© ÿ£Ÿà ŸÖÿ≥ÿßÿ≠ÿ© ÿÆÿ∂ÿ±ÿßÿ°", "ÿ™ÿ®ÿ±ÿπ ÿ®ŸÖÿ¥ÿ∫ŸàŸÑÿßÿ™ ŸäÿØŸàŸäÿ© ŸÑŸÖÿ≤ÿßÿØ ÿÆŸäÿ±Ÿä", "ÿßÿØÿπŸè ŸÑŸÑÿ£ŸÖÿ© ÿßŸÑÿ•ÿ≥ŸÑÿßŸÖŸäÿ© ÿ¨ŸÖÿπÿßÿ° ŸÅŸä ÿßŸÑÿπÿ¥ÿ± ÿßŸÑÿ£ŸàÿßÿÆÿ±", "ÿßŸáÿØŸê ÿ≥ÿ®ÿ≠ÿ© ÿ£Ÿà ÿ≥ÿ¨ÿßÿØÿ© ÿµŸÑÿßÿ© ŸÑŸÖÿ≥ŸÑŸÖ ÿ¨ÿØŸäÿØ"]
            }
        };

        let currentLang = localStorage.getItem('ramadanLang') || 'en';

        function setLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('ramadanLang', lang);
            document.documentElement.lang = lang;
            document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';

            const t = TRANSLATIONS[lang];
            document.getElementById('mainTitle').textContent = t.mainTitle;
            document.getElementById('mainSubtitle').textContent = t.mainSubtitle;
            document.getElementById('homeTab').textContent = t.home;
            document.getElementById('quranTab').textContent = t.fullQuran;
            document.getElementById('recipesTab').textContent = t.recipes;
            document.getElementById('prevBtn').textContent = t.prevDay;
            document.getElementById('todayBtn').textContent = t.today;
            document.getElementById('nextBtn').textContent = t.nextDay;
            document.getElementById('browseAllBtn').textContent = `üìú ${t.browseAll}`;
            document.getElementById('notifTitle').textContent = t.notifTitle;
            document.getElementById('remindAtLabel').textContent = t.remindAt;
            document.getElementById('saveNotifBtn').textContent = t.save;
            document.getElementById('prayerTimesTitle').textContent = t.prayerTimes;
            document.getElementById('nextPrayerLabel').textContent = t.nextPrayer;
            document.getElementById('savePrayersBtn').textContent = t.savePrayers;
            document.getElementById('notesTitle').textContent = t.notes;
            document.getElementById('noteTextInput').placeholder = t.notePlaceholder;
            document.getElementById('addNoteBtn').textContent = t.addNote;
            const detectBtn = document.getElementById('detectLocText');
            if (detectBtn) detectBtn.textContent = t.detectLoc;
            const methodLabel = document.getElementById('methodLabel');
            if (methodLabel) methodLabel.textContent = t.method;
            const madhabLabel = document.getElementById('madhabLabel');
            if (madhabLabel) madhabLabel.textContent = t.madhab;

            document.getElementById('quranTitle').textContent = t.quran;
            const homeTab = document.getElementById('homeTab');
            if (homeTab) homeTab.textContent = t.home;
            const quranTab = document.getElementById('quranTab');
            if (quranTab) quranTab.textContent = t.fullQuran;
            const recipesTab = document.getElementById('recipesTab');
            if (recipesTab) recipesTab.textContent = t.recipes;
            const userAge = document.getElementById('userAge');
            if (userAge) userAge.placeholder = t.agePlaceholder;
            document.getElementById('sadaqahTitle').textContent = t.sadaqahTitle;
            document.getElementById('sadaqahSubtitle').textContent = t.sadaqahSubtitle;
            document.getElementById('sadaqahBtn').textContent = t.sadaqahBtn;
            document.getElementById('prevAyahBtn').textContent = t.prev;
            document.getElementById('nextAyahBtn').textContent = t.next;

            // Update prayer names in list
            PRAYERS.forEach(p => {
                const el = document.getElementById(`${p}Name`);
                if (el) el.textContent = t[p];
            });

            document.getElementById('footerMubarak').textContent = t.footerMubarak;
            document.getElementById('footerMadeWith').textContent = t.footerMadeWith;

            // Hide/Show English elements based on logic
            const englishElements = document.querySelectorAll('.transliteration, .english-text, .adhkar-transliteration, .adhkar-meaning, .ayah-translation');
            englishElements.forEach(el => {
                el.style.display = lang === 'ar' ? 'none' : 'block';
            });

            // Update active state on buttons
            document.getElementById('enBtn').classList.toggle('active', lang === 'en');
            document.getElementById('arBtn').classList.toggle('active', lang === 'ar');

            // Re-render dynamic elements
            updateUI();
            displayAyah(currentAyahIndex);
            updateNextPrayer();
            renderNotes();
        }

        // 30 Daily Duas
        const DAILY_DUAS = [
            { day: 1, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿßÿ¨ŸíÿπŸéŸÑŸí ÿµŸêŸäŸéÿßŸÖŸêŸä ŸÅŸêŸäŸáŸê ÿµŸêŸäŸéÿßŸÖŸé ÿßŸÑÿµŸéŸëÿßÿ¶ŸêŸÖŸêŸäŸÜŸé", english: "O Allah, make my fasting in it the fasting of those who truly fast.", transliteration: "Allahumma aj'al siyami fihi siyamas-sa'imin" },
            { day: 2, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ŸÇŸéÿ±ŸêŸëÿ®ŸíŸÜŸêŸä ŸÅŸêŸäŸáŸê ÿ•ŸêŸÑŸéŸâ ŸÖŸéÿ±Ÿíÿ∂Ÿéÿßÿ™ŸêŸÉŸé", english: "O Allah, bring me closer to Your pleasure in this day.", transliteration: "Allahumma qarribni fihi ila mardatik" },
            { day: 3, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿßÿ±Ÿíÿ≤ŸèŸÇŸíŸÜŸêŸä ŸÅŸêŸäŸáŸê ÿßŸÑÿ∞ŸêŸëŸáŸíŸÜŸé ŸàŸéÿßŸÑÿ™ŸéŸëŸÜŸíÿ®ŸêŸäŸáŸé", english: "O Allah, grant me awareness and alertness in this day.", transliteration: "Allahumma arzuqni fihidh-dhihna wat-tanbih" },
            { day: 4, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ŸÇŸéŸàŸêŸëŸÜŸêŸä ŸÅŸêŸäŸáŸê ÿπŸéŸÑŸéŸâ ÿ•ŸêŸÇŸéÿßŸÖŸéÿ©Ÿê ÿ£ŸéŸÖŸíÿ±ŸêŸÉŸé", english: "O Allah, give me strength to establish Your commands in this day.", transliteration: "Allahumma qawwini fihi ala iqamati amrik" },
            { day: 5, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿßÿ¨ŸíÿπŸéŸÑŸíŸÜŸêŸä ŸÅŸêŸäŸáŸê ŸÖŸêŸÜŸé ÿßŸÑŸíŸÖŸèÿ≥Ÿíÿ™Ÿéÿ∫ŸíŸÅŸêÿ±ŸêŸäŸÜŸé", english: "O Allah, make me among those who seek forgiveness in this day.", transliteration: "Allahumma aj'alni fihil mustaghfirin" },
            { day: 6, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ŸÑŸéÿß ÿ™ŸéÿÆŸíÿ∞ŸèŸÑŸíŸÜŸêŸä ŸÅŸêŸäŸáŸê ŸÑŸêÿ™ŸéÿπŸéÿ±ŸèŸëÿ∂Ÿê ŸÖŸéÿπŸíÿµŸêŸäŸéÿ™ŸêŸÉŸé", english: "O Allah, do not abandon me for exposing myself to Your disobedience.", transliteration: "Allahumma la takhdhulni fihi lita'arrudi ma'siyatik" },
            { day: 7, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿ£ŸéÿπŸêŸÜŸêŸëŸä ŸÅŸêŸäŸáŸê ÿπŸéŸÑŸéŸâ ÿµŸêŸäŸéÿßŸÖŸêŸáŸê ŸàŸéŸÇŸêŸäŸéÿßŸÖŸêŸáŸê", english: "O Allah, help me in this day with its fasting and prayers.", transliteration: "Allahumma a'inni fihi ala siyamihi wa qiyamih" },
            { day: 8, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿßÿ±Ÿíÿ≤ŸèŸÇŸíŸÜŸêŸä ŸÅŸêŸäŸáŸê ÿ±Ÿéÿ≠ŸíŸÖŸéÿ©Ÿé ÿßŸÑŸíÿ£ŸéŸäŸíÿ™ŸéÿßŸÖŸê", english: "O Allah, grant me mercy towards orphans in this day.", transliteration: "Allahumma arzuqni fihi rahmatal aytam" },
            { day: 9, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿßÿ¨ŸíÿπŸéŸÑŸí ŸÑŸêŸä ŸÅŸêŸäŸáŸê ŸÜŸéÿµŸêŸäÿ®Ÿãÿß ŸÖŸêŸÜŸí ÿ±Ÿéÿ≠ŸíŸÖŸéÿ™ŸêŸÉŸé ÿßŸÑŸíŸàŸéÿßÿ≥ŸêÿπŸéÿ©Ÿê", english: "O Allah, give me a share of Your vast mercy in this day.", transliteration: "Allahumma aj'al li fihi nasiban min rahmatik al-wasi'ah" },
            { day: 10, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿßÿ¨ŸíÿπŸéŸÑŸíŸÜŸêŸä ŸÅŸêŸäŸáŸê ŸÖŸêŸÜŸé ÿßŸÑŸíŸÖŸèÿ™ŸéŸàŸéŸÉŸêŸëŸÑŸêŸäŸÜŸé ÿπŸéŸÑŸéŸäŸíŸÉŸé", english: "O Allah, make me among those who trust in You in this day.", transliteration: "Allahumma aj'alni fihil mutawakkilin alayk" },
            { day: 11, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿ≠Ÿéÿ®ŸêŸëÿ®Ÿí ÿ•ŸêŸÑŸéŸäŸéŸë ŸÅŸêŸäŸáŸê ÿßŸÑŸíÿ•Ÿêÿ≠Ÿíÿ≥ŸéÿßŸÜŸé", english: "O Allah, make me love doing good in this day.", transliteration: "Allahumma habbib ilayya fihil ihsan" },
            { day: 12, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿ≤ŸéŸäŸêŸëŸÜŸêŸëŸä ŸÅŸêŸäŸáŸê ÿ®ŸêÿßŸÑÿ≥ŸêŸëÿ™Ÿíÿ±Ÿê ŸàŸéÿßŸÑŸíÿπŸéŸÅŸéÿßŸÅŸê", english: "O Allah, adorn me with modesty and chastity in this day.", transliteration: "Allahumma zayyinni fihi bis-sitri wal-afaf" },
            { day: 13, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿ∑ŸéŸáŸêŸëÿ±ŸíŸÜŸêŸä ŸÅŸêŸäŸáŸê ŸÖŸêŸÜŸé ÿßŸÑÿØŸéŸëŸÜŸéÿ≥Ÿê ŸàŸéÿßŸÑŸíÿ£ŸéŸÇŸíÿ∞Ÿéÿßÿ±Ÿê", english: "O Allah, purify me from impurities in this day.", transliteration: "Allahumma tahhirni fihil min ad-danasi wal-aqdhaar" },
            { day: 14, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ŸÑŸéÿß ÿ™Ÿèÿ§ŸéÿßÿÆŸêÿ∞ŸíŸÜŸêŸä ŸÅŸêŸäŸáŸê ÿ®ŸêÿßŸÑŸíÿπŸéÿ´Ÿéÿ±Ÿéÿßÿ™Ÿê", english: "O Allah, do not hold me accountable for my slips in this day.", transliteration: "Allahumma la tu'akhidhni fihi bil-atharat" },
            { day: 15, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿßÿ±Ÿíÿ≤ŸèŸÇŸíŸÜŸêŸä ŸÅŸêŸäŸáŸê ÿ∑ŸéÿßÿπŸéÿ©Ÿé ÿßŸÑŸíÿÆŸéÿßÿ¥ŸêÿπŸêŸäŸÜŸé", english: "O Allah, grant me the obedience of the humble in this day.", transliteration: "Allahumma arzuqni fihi ta'atal khashi'in" },
            { day: 16, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ŸàŸéŸÅŸêŸëŸÇŸíŸÜŸêŸä ŸÅŸêŸäŸáŸê ŸÑŸêŸÖŸèŸàŸéÿßŸÅŸéŸÇŸéÿ©Ÿê ÿßŸÑŸíÿ£Ÿéÿ®Ÿíÿ±Ÿéÿßÿ±Ÿê", english: "O Allah, grant me success to be with the righteous in this day.", transliteration: "Allahumma waffiqni fihi limuwafaqatil abrar" },
            { day: 17, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿßŸáŸíÿØŸêŸÜŸêŸä ŸÅŸêŸäŸáŸê ŸÑŸêÿµŸéÿßŸÑŸêÿ≠Ÿê ÿßŸÑŸíÿ£ŸéÿπŸíŸÖŸéÿßŸÑŸê", english: "O Allah, guide me to righteous deeds in this day.", transliteration: "Allahumma ahdini fihi lisalihil a'mal" },
            { day: 18, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ŸÜŸéÿ®ŸêŸëŸáŸíŸÜŸêŸä ŸÅŸêŸäŸáŸê ŸÑŸêÿ®Ÿéÿ±ŸéŸÉŸéÿßÿ™Ÿê ÿ£Ÿéÿ≥Ÿíÿ≠Ÿéÿßÿ±ŸêŸáŸê", english: "O Allah, awaken me to the blessings of its pre-dawn hours.", transliteration: "Allahumma nabbihni fihi libarakati asharih" },
            { day: 19, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ŸàŸéŸÅŸêŸëÿ±Ÿí ÿ≠Ÿéÿ∏ŸêŸëŸä ŸÅŸêŸäŸáŸê ŸÖŸêŸÜŸí ÿ®Ÿéÿ±ŸéŸÉŸéÿßÿ™ŸêŸáŸê", english: "O Allah, increase my share of its blessings in this day.", transliteration: "Allahumma waffir hazzi fihi min barakatih" },
            { day: 20, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿßŸÅŸíÿ™Ÿéÿ≠Ÿí ŸÑŸêŸä ŸÅŸêŸäŸáŸê ÿ£Ÿéÿ®ŸíŸàŸéÿßÿ®Ÿé ÿßŸÑŸíÿ¨ŸêŸÜŸéÿßŸÜŸê", english: "O Allah, open for me the gates of Paradise in this day.", transliteration: "Allahumma iftah li fihi abwabal jinan" },
            { day: 21, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿßÿ¨ŸíÿπŸéŸÑŸí ŸÑŸêŸä ŸÅŸêŸäŸáŸê ÿ•ŸêŸÑŸéŸâ ŸÖŸéÿ±Ÿíÿ∂Ÿéÿßÿ™ŸêŸÉŸé ÿØŸéŸÑŸêŸäŸÑŸãÿß", english: "O Allah, provide me a guide to Your pleasure in this day.", transliteration: "Allahumma aj'al li fihi ila mardatika dalila" },
            { day: 22, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿßŸÅŸíÿ™Ÿéÿ≠Ÿí ŸÑŸêŸä ŸÅŸêŸäŸáŸê ÿ£Ÿéÿ®ŸíŸàŸéÿßÿ®Ÿé ŸÅŸéÿ∂ŸíŸÑŸêŸÉŸé", english: "O Allah, open for me the doors of Your grace in this day.", transliteration: "Allahumma iftah li fihi abwaba fadlik" },
            { day: 23, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿßÿ∫Ÿíÿ≥ŸêŸÑŸíŸÜŸêŸä ŸÅŸêŸäŸáŸê ŸÖŸêŸÜŸé ÿßŸÑÿ∞ŸèŸëŸÜŸèŸàÿ®Ÿê", english: "O Allah, wash away my sins in this day.", transliteration: "Allahumma ighsilni fihil min adh-dhunub" },
            { day: 24, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿ•ŸêŸÜŸêŸëŸä ÿ£Ÿéÿ≥Ÿíÿ£ŸéŸÑŸèŸÉŸé ŸÅŸêŸäŸáŸê ŸÖŸéÿß ŸäŸèÿ±Ÿíÿ∂ŸêŸäŸÉŸé", english: "O Allah, I ask You for what pleases You in this day.", transliteration: "Allahumma inni as'aluka fihi ma yurdik" },
            { day: 25, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿßÿ¨ŸíÿπŸéŸÑŸíŸÜŸêŸä ŸÅŸêŸäŸáŸê ŸÖŸèÿ≠Ÿêÿ®ŸãŸëÿß ŸÑŸêÿ£ŸéŸàŸíŸÑŸêŸäŸéÿßÿ¶ŸêŸÉŸé", english: "O Allah, make me love Your friends in this day.", transliteration: "Allahumma aj'alni fihi muhibban li awliya'ik" },
            { day: 26, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿßÿ¨ŸíÿπŸéŸÑŸí ÿ≥ŸéÿπŸíŸäŸêŸä ŸÅŸêŸäŸáŸê ŸÖŸéÿ¥ŸíŸÉŸèŸàÿ±Ÿãÿß", english: "O Allah, make my efforts appreciated in this day.", transliteration: "Allahumma aj'al sa'yi fihi mashkura" },
            { day: 27, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿßÿ±Ÿíÿ≤ŸèŸÇŸíŸÜŸêŸä ŸÅŸêŸäŸáŸê ŸÅŸéÿ∂ŸíŸÑŸé ŸÑŸéŸäŸíŸÑŸéÿ©Ÿê ÿßŸÑŸíŸÇŸéÿØŸíÿ±Ÿê", english: "O Allah, grant me the blessings of Laylatul Qadr in this day.", transliteration: "Allahumma arzuqni fihi fadla laylatul qadr" },
            { day: 28, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ŸàŸéŸÅŸêŸëÿ±Ÿí ÿ≠Ÿéÿ∏ŸêŸëŸä ŸÅŸêŸäŸáŸê ŸÖŸêŸÜŸé ÿßŸÑŸÜŸéŸëŸàŸéÿßŸÅŸêŸÑŸê", english: "O Allah, increase my share of voluntary prayers in this day.", transliteration: "Allahumma waffir hazzi fihil min an-nawafil" },
            { day: 29, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿ∫Ÿéÿ¥ŸêŸëŸÜŸêŸä ŸÅŸêŸäŸáŸê ÿ®ŸêÿßŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸéÿ©Ÿê", english: "O Allah, cover me with mercy in this day.", transliteration: "Allahumma ghashshini fihi bir-rahmah" },
            { day: 30, arabic: "ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿßÿ¨ŸíÿπŸéŸÑŸí ÿµŸêŸäŸéÿßŸÖŸêŸä ŸÅŸêŸäŸáŸê ÿ®ŸêÿßŸÑÿ¥ŸèŸëŸÉŸíÿ±Ÿê ŸàŸéÿßŸÑŸíŸÇŸéÿ®ŸèŸàŸÑŸê", english: "O Allah, make my fasting accepted with gratitude in this day.", transliteration: "Allahumma aj'al siyami fihi bish-shukri wal-qabul" }
        ];

        let currentViewDay = null;
        let actualRamadanDay = null;

        // Location & Prayer API functions
        async function detectLocation() {
            const status = document.getElementById('locationStatus');
            const t = TRANSLATIONS[currentLang];

            if (!navigator.geolocation) {
                status.textContent = t.locError;
                status.className = 'location-status error';
                return;
            }

            status.textContent = t.detecting;
            status.className = 'location-status';

            navigator.geolocation.getCurrentPosition(
                async (position) => {
                    const { latitude, longitude } = position.coords;
                    await fetchPrayerTimes(latitude, longitude);
                },
                (error) => {
                    status.textContent = t.geoDenied;
                    status.className = 'location-status error';
                }
            );
        }

        async function fetchPrayerTimes(lat, lon) {
            const status = document.getElementById('locationStatus');
            const t = TRANSLATIONS[currentLang];

            try {
                const method = document.getElementById('calcMethod').value;
                const school = document.getElementById('asrMadhab').value;
                localStorage.setItem('prayerMethod', method);
                localStorage.setItem('asrMadhab', school);

                // Use Aladhan API with selected method and school (Madhab)
                const response = await fetch(`https://api.aladhan.com/v1/timings?latitude=${lat}&longitude=${lon}&method=${method}&school=${school}`);
                const data = await response.json();

                if (data.code === 200) {
                    const timings = data.data.timings;
                    const meta = data.data.meta;

                    // Update individual inputs
                    document.getElementById('fajrTime').value = timings.Fajr;
                    document.getElementById('dhuhrTime').value = timings.Dhuhr;
                    document.getElementById('asrTime').value = timings.Asr;
                    document.getElementById('maghribTime').value = timings.Maghrib;
                    document.getElementById('ishaTime').value = timings.Isha;

                    // Save and update
                    savePrayerTimes();

                    const location = meta.timezone.split('/').pop().replace('_', ' ');
                    status.textContent = `‚úÖ ${t.locSuccess}${location}. ${t.timesUpdated}`;
                    status.className = 'location-status success';

                    // Auto-hide status after 5 seconds
                    setTimeout(() => {
                        status.textContent = '';
                    }, 5000);
                } else {
                    status.textContent = t.locError;
                    status.className = 'location-status error';
                }
            } catch (error) {
                status.textContent = t.locError;
                status.className = 'location-status error';
            }
        }

        // Create animated stars
        function createStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 2 + 's';
                star.style.width = (Math.random() * 2 + 1) + 'px';
                star.style.height = star.style.width;
                starsContainer.appendChild(star);
            }
        }

        // Helper to convert numbers to Arabic-Indic numerals
        function toArabicNumerals(num) {
            if (currentLang !== 'ar') return num;
            const numerals = ['Ÿ†', 'Ÿ°', 'Ÿ¢', 'Ÿ£', 'Ÿ§', 'Ÿ•', 'Ÿ¶', 'Ÿß', 'Ÿ®', 'Ÿ©'];
            return String(num).replace(/[0-9]/g, w => numerals[+w]);
        }

        // Calculate current Ramadan day
        function getRamadanDay() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            // Check 2026
            const start2026 = new Date(RAMADAN_START_2026);
            start2026.setHours(0, 0, 0, 0);
            const end2026 = new Date(start2026);
            end2026.setDate(end2026.getDate() + 29);

            if (today >= start2026 && today <= end2026) {
                return Math.floor((today - start2026) / (1000 * 60 * 60 * 24)) + 1;
            }

            // Check 2027
            const start2027 = new Date(RAMADAN_START_2027);
            start2027.setHours(0, 0, 0, 0);
            const end2027 = new Date(start2027);
            end2027.setDate(end2027.getDate() + 29);

            if (today >= start2027 && today <= end2027) {
                return Math.floor((today - start2027) / (1000 * 60 * 60 * 24)) + 1;
            }

            return null;
        }

        // Get days until Ramadan
        function getDaysUntilRamadan() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            let nextRamadan = new Date(RAMADAN_START_2026);
            if (today > new Date(RAMADAN_START_2026)) {
                nextRamadan = new Date(RAMADAN_START_2027);
            }

            return Math.ceil((nextRamadan - today) / (1000 * 60 * 60 * 24));
        }

        // Update the day card
        function updateDayCard() {
            const dayCard = document.getElementById('dayCard');
            actualRamadanDay = getRamadanDay();
            const t = TRANSLATIONS[currentLang];

            if (actualRamadanDay && currentViewDay === actualRamadanDay) {
                dayCard.innerHTML = `
                    <div class="day-label">${t.dayLabel}</div>
                    <div class="day-number">${toArabicNumerals(currentViewDay)}</div>
                    <div class="day-of-30">${t.dayOf30}</div>
                `;
            } else {
                // If it's not Ramadan, or if the user is browsing a different day
                dayCard.innerHTML = `
                    <div class="day-label">${t.dayLabel}</div>
                    <div class="day-number">${toArabicNumerals(currentViewDay)}</div>
                    <div class="day-of-30">${t.dayOf30}</div>
                `;

                // If it's NOT Ramadan, show a small countdown below if needed, or just let users browse
                if (!actualRamadanDay) {
                    const daysUntil = getDaysUntilRamadan();
                    dayCard.innerHTML += `<div style="font-size: 0.8rem; margin-top: 10px; color: var(--gold); opacity: 0.8;">${t.notRamadan} ${toArabicNumerals(daysUntil)} ${t.days}</div>`;
                }
            }
        }

        // Update progress bar
        function updateProgress() {
            const container = document.getElementById('progressContainer');
            const actualDay = getRamadanDay();
            const t = TRANSLATIONS[currentLang];

            if (!actualDay) {
                container.style.display = 'none';
                return;
            }

            container.style.display = 'block';
            const progress = (actualDay / 30) * 100;

            container.innerHTML = `
                <div class="progress-label">
                    <span>${t.progress}</span>
                    <span>${toArabicNumerals(actualDay)}/Ÿ£Ÿ† ${t.days}</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: ${progress}%"></div>
                </div>
            `;
        }

        // Update dua card - now a slider with all supplications
        function updateDuaCard() {
            const duaCard = document.getElementById('duaCard');
            const t = TRANSLATIONS[currentLang];

            // Re-render only if current language changed or first time
            if (!duaCard.querySelector('.dua-slider') || duaCard.dataset.lang !== currentLang) {
                duaCard.dataset.lang = currentLang;
                const slidesHtml = ALL_DUAS.map((dua, index) => `
                    <div class="dua-slide" id="dua-slide-${index + 1}">
                        <div class="dua-header">
                            <span class="dua-title">‚ú® ${currentLang === 'ar' ? 'ÿØÿπÿßÿ°' : 'Supplication'} ${toArabicNumerals(index + 1)}</span>
                            <div style="display: flex; gap: 8px; flex-wrap: wrap; justify-content: flex-end;">
                                <button class="lang-btn" onclick="showAllDuasModal()" style="font-size: 0.7rem; padding: 4px 8px;">
                                    ${t.browseAll}
                                </button>
                                <button class="speak-btn" onclick="speakDua(${index + 1})" id="speakBtn-${index + 1}" style="width: 35px; height: 35px;" title="Read Aloud">
                                    <svg viewBox="0 0 24 24" style="width: 18px; height: 18px;"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                                </button>
                                <button class="fullscreen-btn" onclick="openFullScreen('dua', null, ${index + 1})" style="width: 35px; height: 35px;" title="Full Screen">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 18px; height: 18px;"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path></svg>
                                </button>
                            </div>
                        </div>
                        <div class="arabic-text">${dua.arabic}</div>
                        <div class="transliteration" style="${currentLang === 'ar' ? 'display:none' : ''}">${dua.transliteration}</div>
                        <div class="english-text" style="${currentLang === 'ar' ? 'display:none' : ''}">${dua.english}</div>
                    </div>
                `).join('');

                duaCard.innerHTML = `<div class="dua-slider" id="duaSlider">${slidesHtml}</div>`;

                // Add scroll listener
                const slider = document.getElementById('duaSlider');
                let isResetting = false;

                slider.addEventListener('scroll', () => {
                    if (isResetting) return;

                    const slideWidth = slider.offsetWidth + 40;
                    const index = Math.round(slider.scrollLeft / slideWidth);
                    const newDay = index + 1;

                    if (newDay !== currentViewDay && newDay >= 1 && newDay <= ALL_DUAS.length) {
                        currentViewDay = newDay;
                        updateNavButtons();
                        // Only update day card if within 1-30
                        if (currentViewDay <= 30) {
                            updateDayCard();
                            updateProgress();
                        }
                    }

                    // Reset logic: if at the very end, wait a bit and move to start (simple infinite feel)
                    // Or just let it be 50 items. User said "once finished it resets the cycle".
                    // We can detect if they scroll past 50 and jump to 1.
                    if (slider.scrollLeft >= (ALL_DUAS.length - 0.5) * slideWidth) {
                        // Optional: Jump to start or just stay at 50.
                    }
                });
            }

            // Sync position
            const slider = document.getElementById('duaSlider');
            const targetSlide = document.getElementById(`dua-slide-${currentViewDay}`);
            if (targetSlide) {
                const targetScrollLeft = targetSlide.offsetLeft - slider.offsetLeft;
                slider.scrollTo({ left: targetScrollLeft, behavior: 'smooth' });
            }
        }

        // Full Screen Functions
        function openFullScreen(type, elementId, specificDay) {
            const overlay = document.getElementById('fullscreenOverlay');
            const content = document.getElementById('fullscreenContent');
            let innerHTML = '';

            if (type === 'dua') {
                const day = specificDay || currentViewDay;
                const dua = ALL_DUAS[day - 1];
                const t = TRANSLATIONS[currentLang];
                innerHTML = `
                    <span class="dua-title">‚ú® ${currentLang === 'ar' ? 'ÿØÿπÿßÿ°' : 'Supplication'} ${day}</span>
                    <div class="arabic-text">${dua.arabic}</div>
                    <div class="transliteration" style="${currentLang === 'ar' ? 'display:none' : ''}">${dua.transliteration}</div>
                    <div class="english-text" style="${currentLang === 'ar' ? 'display:none' : ''}">${dua.english}</div>
                `;
            } else if (type === 'ayah') {
                const surah = getTodaysSurah();
                const ayah = surah.ayahs[currentAyahIndex];
                const t = TRANSLATIONS[currentLang];
                innerHTML = `
                    <span class="quran-title">üìñ ${t.quran}</span>
                    <div class="ayah-arabic">${ayah.arabic}</div>
                    <div class="ayah-translation" style="${currentLang === 'ar' ? 'display:none' : ''}">${ayah.translation}</div>
                    <div class="ayah-reference">üìç ${surah.name} ${ayah.verse}</div>
                `;
            } else if (type === 'adhkar') {
                const el = document.getElementById(elementId);
                innerHTML = el.innerHTML;
                // Remove the fullscreen button from the cloned content
                innerHTML = innerHTML.replace(/<button.*fullscreen-btn.*<\/button>/g, '');

                if (currentLang === 'ar') {
                    // Hide English parts in Arabic mode
                    innerHTML = innerHTML.replace(/class="adhkar-transliteration"/g, 'class="adhkar-transliteration" style="display:none"');
                    innerHTML = innerHTML.replace(/class="adhkar-meaning"/g, 'class="adhkar-meaning" style="display:none"');
                }
            }

            content.innerHTML = innerHTML;
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeFullScreen() {
            document.getElementById('fullscreenOverlay').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function handleOverlayClick(e) {
            if (e.target.id === 'fullscreenOverlay') {
                closeFullScreen();
            }
        }

        // Get the best Arabic voice available
        let cachedVoices = [];

        function loadVoices() {
            cachedVoices = window.speechSynthesis.getVoices();
        }

        // Load voices on page load and when they change
        loadVoices();
        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = loadVoices;
        }

        function getArabicVoice() {
            const voices = cachedVoices.length > 0 ? cachedVoices : window.speechSynthesis.getVoices();

            // Priority list of Arabic accents to try (best first)
            const arabicLocales = [
                'ar-SA', // Saudi Arabia
                'ar-AE', // UAE
                'ar-EG', // Egypt
                'ar-KW', // Kuwait
                'ar-QA', // Qatar
                'ar-BH', // Bahrain
                'ar-OM', // Oman
                'ar-JO', // Jordan
                'ar-LB', // Lebanon
                'ar-SY', // Syria
                'ar-IQ', // Iraq
                'ar-YE', // Yemen
                'ar-LY', // Libya
                'ar-TN', // Tunisia
                'ar-DZ', // Algeria
                'ar-MA', // Morocco
                'ar'     // Generic Arabic
            ];

            // Try to find a voice matching our priority list
            for (const locale of arabicLocales) {
                const voice = voices.find(v => v.lang === locale || v.lang.startsWith(locale));
                if (voice) {
                    console.log('Found Arabic voice:', voice.name, voice.lang);
                    return voice;
                }
            }

            // Fallback: look for any voice with "arab" in the name
            const arabicByName = voices.find(v =>
                v.name.toLowerCase().includes('arabic') ||
                v.name.toLowerCase().includes('arab')
            );

            if (arabicByName) {
                console.log('Found Arabic voice by name:', arabicByName.name);
                return arabicByName;
            }

            console.log('No Arabic voice found. Available voices:', voices.map(v => `${v.name} (${v.lang})`));
            return null;
        }

        // Text-to-speech in Arabic with authentic accent
        function speakDua(specificDay) {
            const day = specificDay || currentViewDay;
            const dua = ALL_DUAS[day - 1];
            const btn = document.getElementById(`speakBtn-${day}`) || document.getElementById('speakBtn');

            // Cancel any ongoing speech
            window.speechSynthesis.cancel();

            // Create utterance with Arabic text
            const utterance = new SpeechSynthesisUtterance(dua.arabic);

            // Try to use an Arabic voice first
            const arabicVoice = getArabicVoice();
            if (arabicVoice) {
                utterance.voice = arabicVoice;
                utterance.lang = arabicVoice.lang;
            } else {
                // Force Arabic language even without a specific voice
                utterance.lang = 'ar-SA';
            }

            // Natural speech settings for Arabic recitation
            utterance.rate = 0.75; // Slower for beautiful recitation
            utterance.pitch = 0.95; // Slightly lower for reverent tone
            utterance.volume = 1.0;

            if (btn) btn.classList.add('speaking');
            utterance.onend = () => { if (btn) btn.classList.remove('speaking'); };
            utterance.onerror = (e) => {
                console.log('Speech error:', e);
                if (btn) btn.classList.remove('speaking');
            };

            window.speechSynthesis.speak(utterance);
        }


        // Logic to update everything when day changes
        function updateUI() {
            updateDayCard();
            updateProgress();
            updateDuaCard();
            updateNavButtons();
        }

        // Navigation skip/cycle functions
        function nextDay() {
            if (currentViewDay < ALL_DUAS.length) {
                currentViewDay++;
            } else {
                currentViewDay = 1;
            }
            updateUI();
        }

        function prevDay() {
            if (currentViewDay > 1) {
                currentViewDay--;
            } else {
                currentViewDay = ALL_DUAS.length;
            }
            updateUI();
        }

        function goToToday() {
            if (actualRamadanDay) {
                currentViewDay = actualRamadanDay;
            } else {
                currentViewDay = 1;
            }
            updateUI();
        }

        // List View Modal
        function showAllDuasModal() {
            const overlay = document.getElementById('fullscreenOverlay');
            const content = document.getElementById('fullscreenContent');
            const t = TRANSLATIONS[currentLang];

            let html = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                    <h2 style="color: var(--gold); margin: 0;">${t.browseAll}</h2>
                    <button onclick="closeFullScreen()" style="background: var(--accent); border: none; color: white; padding: 10px 20px; border-radius: 12px; cursor: pointer; font-weight: 700;">${currentLang === 'ar' ? 'ÿ•ÿ∫ŸÑÿßŸÇ' : 'Close'}</button>
                </div>
            `;
            html += `<div style="display: grid; gap: 15px; max-height: 70vh; overflow-y: auto; padding: 10px; padding-right: 5px;">`;

            ALL_DUAS.forEach((dua, idx) => {
                html += `
                    <div onclick="jumpToDua(${idx + 1})" style="background: rgba(255,255,255,0.05); padding: 18px; border-radius: 16px; cursor: pointer; border: 1px solid rgba(255,215,0,0.1); transition: 0.3s; text-align: right;" onmouseover="this.style.borderColor='var(--gold)'; this.style.background='rgba(255,215,0,0.05)'" onmouseout="this.style.borderColor='rgba(255,215,0,0.1)'; this.style.background='rgba(255,255,255,0.05)'">
                        <div style="color: var(--gold); font-weight: 700; margin-bottom: 8px; font-size: 0.9rem; opacity: 0.8;">${currentLang === 'ar' ? 'ÿØÿπÿßÿ°' : 'Supplication'} ${idx + 1}</div>
                        <div style="font-family: 'Amiri', serif; font-size: 1.3rem; line-height: 1.4; color: white; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; direction: rtl;">${dua.arabic}</div>
                    </div>
                `;
            });

            html += `</div>`;
            content.innerHTML = html;
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function jumpToDua(day) {
            currentViewDay = day;
            closeFullScreen();
            updateUI();
        }

        function updateNavButtons() {
            // No disabling - always allow skipping/cycling
            document.getElementById('prevBtn').disabled = false;
            document.getElementById('nextBtn').disabled = false;
        }

        function updateAll() {
            updateDayCard();
            updateProgress();
            updateDuaCard();
            updateNavButtons();
        }

        // ==================== NOTIFICATIONS ====================

        let notificationTimer = null;

        // Request notification permission
        async function requestNotificationPermission() {
            if (!('Notification' in window)) {
                return 'unsupported';
            }

            if (Notification.permission === 'granted') {
                return 'granted';
            }

            if (Notification.permission !== 'denied') {
                const permission = await Notification.requestPermission();
                return permission;
            }

            return Notification.permission;
        }

        // Toggle notifications on/off
        async function toggleNotifications() {
            const toggle = document.getElementById('notificationToggle');
            const settings = document.getElementById('notificationSettings');
            const status = document.getElementById('notificationStatus');

            const t = TRANSLATIONS[currentLang];
            if (toggle.checked) {
                // Request permission
                const permission = await requestNotificationPermission();

                if (permission === 'granted') {
                    settings.classList.add('active');
                    localStorage.setItem('ramadanNotificationsEnabled', 'true');
                    status.textContent = t.notifEnabled;
                    status.className = 'notification-status success';

                    // Show a test notification
                    showNotification(t.mainTitle, t.notifEnabled);

                    // Set up the reminder
                    setupDailyReminder();
                } else if (permission === 'unsupported') {
                    toggle.checked = false;
                    status.textContent = t.notifUnsupported;
                    status.className = 'notification-status';
                } else {
                    toggle.checked = false;
                    status.textContent = t.notifDenied;
                    status.className = 'notification-status';
                }
            } else {
                settings.classList.remove('active');
                localStorage.setItem('ramadanNotifications', 'disabled');
                if (notificationTimer) {
                    clearTimeout(notificationTimer);
                }
                status.textContent = '';
            }
        }

        // Show a notification
        function showNotification(title, body) {
            if (Notification.permission === 'granted') {
                const notification = new Notification(title, {
                    body: body,
                    icon: 'üåô',
                    badge: 'üåô',
                    tag: 'ramadan-dua',
                    requireInteraction: true
                });

                notification.onclick = () => {
                    window.focus();
                    notification.close();
                };
            }
        }

        // Save reminder time
        function saveReminderTime() {
            const time = document.getElementById('reminderTime').value;
            localStorage.setItem('ramadanReminderTime', time);

            const status = document.getElementById('notificationStatus');
            const t = TRANSLATIONS[currentLang];
            status.textContent = `‚úÖ ${t.reminderSet} ${formatTime(time)}!`;
            status.className = 'notification-status success';

            setupAllReminders();
        }

        // Format time for display
        function formatTime(time24) {
            const [hours, minutes] = time24.split(':');
            const h = parseInt(hours);
            const ampm = h >= 12 ? 'PM' : 'AM';
            const h12 = h % 12 || 12;
            return `${h12}:${minutes} ${ampm}`;
        }

        // Setup all reminders
        function setupAllReminders() {
            // Clear existing timers
            if (window.notificationTimers) {
                window.notificationTimers.forEach(id => clearTimeout(id));
            }
            window.notificationTimers = [];

            const t = TRANSLATIONS[currentLang];
            const now = new Date();
            const ramadanDay = getRamadanDay();

            // 1. User's custom daily dua reminder
            const savedTime = localStorage.getItem('ramadanReminderTime') || '05:00';
            scheduleNotification(savedTime, "üåô " + t.mainTitle, t.notifTitle, () => {
                const day = ramadanDay || 1;
                const dua = DAILY_DUAS[day - 1];
                return `${t.duaForDay} ${day}: ${dua.arabic}`;
            });

            // Prayer-based and Fasting-based reminders (if times are available)
            const savedPrayers = localStorage.getItem('prayerTimes');
            if (savedPrayers) {
                const times = JSON.parse(savedPrayers);

                // Fasting Reminders ONLY IF IT'S RAMADAN
                if (ramadanDay) {
                    // 2. Sahoor Reminder (30 mins before Fajr)
                    if (times.fajr) {
                        const sahoorTime = offsetTime(times.fajr, -30);
                        scheduleNotification(sahoorTime, "üåô Sahoor Alert", "Time for Sahoor! Fajr is in 30 minutes. Eat and drink for the day's fast. üçûü•õ");
                    }

                    // 3. Dates Before Iftar (10 mins before Maghrib)
                    if (times.maghrib) {
                        const iftarTime = offsetTime(times.maghrib, -10);
                        scheduleNotification(iftarTime, "üçΩÔ∏è Iftar Reminder", "Time to prepare dates! Iftar is in 10 minutes. üå¥");
                    }

                    // 4. Tarawih Reminder (30 mins after Isha)
                    if (times.isha) {
                        const tarawihTime = offsetTime(times.isha, 30);
                        scheduleNotification(tarawihTime, "üïå Tarawih Prayer", "Don't forget Tarawih prayer tonight! ‚ú®");
                    }
                }

                // 5. Istighfar 100x Reminder (Morning - 10 AM)
                scheduleNotification("10:00", "üìø Daily Dhikr", "Time for Istighfar 100x: Astaghfirullah. ü§≤");

                // 6. Salawat Reminder (Afternoon - 3 PM)
                scheduleNotification("15:00", "‚ú® Salawat", "O Allah, send blessings upon Muhammad and the family of Muhammad. üåô");
            }
        }

        // Helper to offset time (e.g., "18:30" + 30 = "19:00")
        function offsetTime(timeStr, offsetMinutes) {
            const [h, m] = timeStr.split(':').map(Number);
            const date = new Date();
            date.setHours(h, m + offsetMinutes, 0);
            return `${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;
        }

        // Generic scheduler
        function scheduleNotification(time24, title, body, bodyFn) {
            const [hours, minutes] = time24.split(':').map(Number);
            const now = new Date();
            const target = new Date();
            target.setHours(hours, minutes, 0, 0);

            if (target <= now) {
                target.setDate(target.getDate() + 1);
            }

            const msUntil = target - now;
            const timerId = setTimeout(() => {
                const actualBody = bodyFn ? bodyFn() : body;
                showNotification(title, actualBody);
                // Re-schedule for tomorrow
                scheduleNotification(time24, title, body, bodyFn);
            }, msUntil);

            window.notificationTimers.push(timerId);
        }

        // Generate Sadaqah Plan
        function generateSadaqahPlan() {
            const ageInput = document.getElementById('userAge');
            const planContainer = document.getElementById('sadaqahPlan');
            const age = parseInt(ageInput.value);
            const t = TRANSLATIONS[currentLang];

            if (!age || age < 1) {
                alert(currentLang === 'ar' ? "Ÿäÿ±ÿ¨Ÿâ ÿ•ÿØÿÆÿßŸÑ ÿπŸÖÿ± ÿµÿ≠Ÿäÿ≠" : "Please enter a valid age");
                return;
            }

            let pool = [];
            if (age < 11) {
                pool = t.sadaqahKids;
            } else if (age < 20) {
                pool = t.sadaqahTeens;
            } else if (age < 60) {
                pool = t.sadaqahAdults;
            } else {
                pool = t.sadaqahSeniors;
            }

            // Pick 3 unique suggestions based on the age
            // Using a multiplier to shift the list significantly for each age
            const start = (age * 7) % pool.length;
            const suggestions = [
                pool[start],
                pool[(start + 1) % pool.length],
                pool[(start + 2) % pool.length]
            ];

            planContainer.innerHTML = suggestions.map(s => `
                <div class="sadaqah-item">
                    <span class="sadaqah-bullet">‚ú®</span>
                    <span>${s}</span>
                </div>
            `).join('');

            planContainer.style.display = 'block';
            planContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Load saved notification settings
        function loadNotificationSettings() {
            const enabled = localStorage.getItem('ramadanNotifications') === 'enabled';
            const savedTime = localStorage.getItem('ramadanReminderTime') || '05:00';

            const toggle = document.getElementById('notificationToggle');
            const settings = document.getElementById('notificationSettings');
            const timeInput = document.getElementById('reminderTime');
            const status = document.getElementById('notificationStatus');

            timeInput.value = savedTime;

            if (enabled && Notification.permission === 'granted') {
                toggle.checked = true;
                settings.classList.add('active');
                const t = TRANSLATIONS[currentLang];
                status.textContent = `‚úÖ ${t.reminderSet} ${formatTime(savedTime)}`;
                status.className = 'notification-status success';
                setupAllReminders();
            }
        }

        // ==================== PRAYER TIMES ====================

        const PRAYERS = ['fajr', 'dhuhr', 'asr', 'maghrib', 'isha'];
        const PRAYER_NAMES = {
            fajr: 'Fajr',
            dhuhr: 'Dhuhr',
            asr: 'Asr',
            maghrib: 'Maghrib',
            isha: 'Isha'
        };

        // Save prayer times to localStorage
        function savePrayerTimes() {
            const times = {};
            PRAYERS.forEach(prayer => {
                const input = document.getElementById(`${prayer}Time`);
                if (input) {
                    times[prayer] = input.value;
                }
            });
            localStorage.setItem('prayerTimes', JSON.stringify(times));
            updateNextPrayer();

            // Show brief confirmation
            const btn = document.querySelector('.save-prayers-btn');
            const originalText = btn.textContent;
            btn.textContent = currentLang === 'ar' ? '‚úÖ ÿ™ŸÖ ÿßŸÑÿ≠ŸÅÿ∏!' : '‚úÖ Saved!';
            setTimeout(() => {
                btn.textContent = originalText;
            }, 1500);
        }

        // Load prayer times from localStorage
        function loadPrayerTimes() {
            const saved = localStorage.getItem('prayerTimes');
            if (saved) {
                const times = JSON.parse(saved);
                PRAYERS.forEach(prayer => {
                    const input = document.getElementById(`${prayer}Time`);
                    if (input && times[prayer]) {
                        input.value = times[prayer];
                    }
                });
            }
        }

        // Get next prayer
        function getNextPrayer() {
            const now = new Date();
            const currentMinutes = now.getHours() * 60 + now.getMinutes();

            let nextPrayer = null;
            let nextPrayerMinutes = Infinity;
            let minutesUntil = Infinity;

            PRAYERS.forEach(prayer => {
                const input = document.getElementById(`${prayer}Time`);
                if (input) {
                    const [hours, mins] = input.value.split(':').map(Number);
                    const prayerMinutes = hours * 60 + mins;

                    // Check if this prayer is still ahead today
                    if (prayerMinutes > currentMinutes) {
                        if (prayerMinutes < nextPrayerMinutes) {
                            nextPrayer = prayer;
                            nextPrayerMinutes = prayerMinutes;
                            minutesUntil = prayerMinutes - currentMinutes;
                        }
                    }
                }
            });

            // If no prayer left today, next is Fajr tomorrow
            if (!nextPrayer) {
                const fajrInput = document.getElementById('fajrTime');
                if (fajrInput) {
                    const [hours, mins] = fajrInput.value.split(':').map(Number);
                    nextPrayer = 'fajr';
                    minutesUntil = (24 * 60 - currentMinutes) + (hours * 60 + mins);
                }
            }

            return { prayer: nextPrayer, minutesUntil };
        }

        // Update next prayer display
        function updateNextPrayer() {
            const { prayer, minutesUntil } = getNextPrayer();

            if (prayer) {
                const nameEl = document.getElementById('nextPrayerName');
                const countdownEl = document.getElementById('nextPrayerCountdown');

                const t = TRANSLATIONS[currentLang];
                nameEl.textContent = t[prayer];

                const hours = Math.floor(minutesUntil / 60);
                const mins = minutesUntil % 60;

                if (hours > 0) {
                    countdownEl.textContent = `${t.in} ${toArabicNumerals(hours)}${t.hours} ${toArabicNumerals(mins)}${t.minutes}`;
                } else {
                    countdownEl.textContent = `${t.in} ${toArabicNumerals(mins)} ${t.minutesFull}`;
                }

                // Highlight the next prayer item
                PRAYERS.forEach(p => {
                    const item = document.getElementById(`${p}Item`);
                    if (item) {
                        item.classList.remove('active');
                        if (p === prayer) {
                            item.classList.add('active');
                        }
                    }
                });
            }
        }

        // ==================== QURAN AYAHS (Same Surah, Changes Daily) ====================

        const DAILY_SURAHS = {
            0: {
                name: "Surah Yasin", ayahs: [
                    { arabic: "Ÿäÿ≥", translation: "Ya-Sin.", verse: "36:1" },
                    { arabic: "ŸàŸéÿßŸÑŸíŸÇŸèÿ±Ÿíÿ¢ŸÜŸê ÿßŸÑŸíÿ≠ŸéŸÉŸêŸäŸÖŸê", translation: "By the wise Quran.", verse: "36:2" },
                    { arabic: "ÿ•ŸêŸÜŸéŸëŸÉŸé ŸÑŸéŸÖŸêŸÜŸé ÿßŸÑŸíŸÖŸèÿ±Ÿíÿ≥ŸéŸÑŸêŸäŸÜŸé", translation: "Indeed you are from among the messengers.", verse: "36:3" },
                    { arabic: "ÿπŸéŸÑŸéŸâŸ∞ ÿµŸêÿ±Ÿéÿßÿ∑Ÿç ŸÖŸèŸëÿ≥Ÿíÿ™ŸéŸÇŸêŸäŸÖŸç", translation: "On a straight path.", verse: "36:4" },
                    { arabic: "ÿ™ŸéŸÜÿ≤ŸêŸäŸÑŸé ÿßŸÑŸíÿπŸéÿ≤ŸêŸäÿ≤Ÿê ÿßŸÑÿ±ŸéŸëÿ≠ŸêŸäŸÖŸê", translation: "A revelation of the Exalted in Might, the Merciful.", verse: "36:5" },
                    { arabic: "ŸÑŸêÿ™ŸèŸÜÿ∞Ÿêÿ±Ÿé ŸÇŸéŸàŸíŸÖŸãÿß ŸÖŸéŸëÿß ÿ£ŸèŸÜÿ∞Ÿêÿ±Ÿé ÿ¢ÿ®Ÿéÿßÿ§ŸèŸáŸèŸÖŸí ŸÅŸéŸáŸèŸÖŸí ÿ∫ŸéÿßŸÅŸêŸÑŸèŸàŸÜŸé", translation: "That you may warn a people whose forefathers were not warned, so they are unaware.", verse: "36:6" },
                    { arabic: "ÿ•ŸêŸÜŸéŸëÿß ŸÜŸéÿ≠ŸíŸÜŸè ŸÜŸèÿ≠ŸíŸäŸêŸä ÿßŸÑŸíŸÖŸéŸàŸíÿ™ŸéŸâŸ∞", translation: "Indeed, it is We who bring the dead to life.", verse: "36:12" },
                    { arabic: "ŸàŸéŸÜŸéŸÉŸíÿ™Ÿèÿ®Ÿè ŸÖŸéÿß ŸÇŸéÿØŸéŸëŸÖŸèŸàÿß ŸàŸéÿ¢ÿ´Ÿéÿßÿ±ŸéŸáŸèŸÖŸí", translation: "And We record what they have put forth and their footprints.", verse: "36:12" },
                    { arabic: "ŸàŸéŸÉŸèŸÑŸéŸë ÿ¥ŸéŸäŸíÿ°Ÿç ÿ£Ÿéÿ≠ŸíÿµŸéŸäŸíŸÜŸéÿßŸáŸè ŸÅŸêŸä ÿ•ŸêŸÖŸéÿßŸÖŸç ŸÖŸèŸëÿ®ŸêŸäŸÜŸç", translation: "And all things We have enumerated in a clear register.", verse: "36:12" },
                    { arabic: "ÿ≥Ÿèÿ®Ÿíÿ≠ŸéÿßŸÜŸé ÿßŸÑŸéŸëÿ∞ŸêŸä ÿÆŸéŸÑŸéŸÇŸé ÿßŸÑŸíÿ£Ÿéÿ≤ŸíŸàŸéÿßÿ¨Ÿé ŸÉŸèŸÑŸéŸëŸáŸéÿß", translation: "Exalted is He who created all pairs.", verse: "36:36" }
                ]
            },
            1: {
                name: "Surah Ar-Rahman", ayahs: [
                    { arabic: "ÿßŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸéŸ∞ŸÜŸè", translation: "The Most Merciful.", verse: "55:1" },
                    { arabic: "ÿπŸéŸÑŸéŸëŸÖŸé ÿßŸÑŸíŸÇŸèÿ±Ÿíÿ¢ŸÜŸé", translation: "Taught the Quran.", verse: "55:2" },
                    { arabic: "ÿÆŸéŸÑŸéŸÇŸé ÿßŸÑŸíÿ•ŸêŸÜÿ≥ŸéÿßŸÜŸé", translation: "Created man.", verse: "55:3" },
                    { arabic: "ÿπŸéŸÑŸéŸëŸÖŸéŸáŸè ÿßŸÑŸíÿ®ŸéŸäŸéÿßŸÜŸé", translation: "Taught him eloquence.", verse: "55:4" },
                    { arabic: "ÿßŸÑÿ¥ŸéŸëŸÖŸíÿ≥Ÿè ŸàŸéÿßŸÑŸíŸÇŸéŸÖŸéÿ±Ÿè ÿ®Ÿêÿ≠Ÿèÿ≥Ÿíÿ®ŸéÿßŸÜŸç", translation: "The sun and the moon move by precise calculation.", verse: "55:5" },
                    { arabic: "ŸàŸéÿßŸÑŸÜŸéŸëÿ¨ŸíŸÖŸè ŸàŸéÿßŸÑÿ¥ŸéŸëÿ¨Ÿéÿ±Ÿè ŸäŸéÿ≥Ÿíÿ¨ŸèÿØŸéÿßŸÜŸê", translation: "And the stars and trees prostrate.", verse: "55:6" },
                    { arabic: "ŸàŸéÿßŸÑÿ≥ŸéŸëŸÖŸéÿßÿ°Ÿé ÿ±ŸéŸÅŸéÿπŸéŸáŸéÿß ŸàŸéŸàŸéÿ∂ŸéÿπŸé ÿßŸÑŸíŸÖŸêŸäÿ≤ŸéÿßŸÜŸé", translation: "And the heaven He raised and imposed the balance.", verse: "55:7" },
                    { arabic: "ŸÅŸéÿ®Ÿêÿ£ŸéŸäŸêŸë ÿ¢ŸÑŸéÿßÿ°Ÿê ÿ±Ÿéÿ®ŸêŸëŸÉŸèŸÖŸéÿß ÿ™ŸèŸÉŸéÿ∞ŸêŸëÿ®ŸéÿßŸÜŸê", translation: "So which of the favors of your Lord would you deny?", verse: "55:13" },
                    { arabic: "ÿÆŸéŸÑŸéŸÇŸé ÿßŸÑŸíÿ•ŸêŸÜÿ≥ŸéÿßŸÜŸé ŸÖŸêŸÜ ÿµŸéŸÑŸíÿµŸéÿßŸÑŸç ŸÉŸéÿßŸÑŸíŸÅŸéÿÆŸéŸëÿßÿ±Ÿê", translation: "He created man from clay like pottery.", verse: "55:14" },
                    { arabic: "ŸàŸéÿÆŸéŸÑŸéŸÇŸé ÿßŸÑŸíÿ¨ŸéÿßŸÜŸéŸë ŸÖŸêŸÜ ŸÖŸéŸëÿßÿ±Ÿêÿ¨Ÿç ŸÖŸêŸëŸÜ ŸÜŸéŸëÿßÿ±Ÿç", translation: "And He created the jinn from a smokeless flame of fire.", verse: "55:15" }
                ]
            },
            2: {
                name: "Surah Al-Mulk", ayahs: [
                    { arabic: "ÿ™Ÿéÿ®Ÿéÿßÿ±ŸéŸÉŸé ÿßŸÑŸéŸëÿ∞ŸêŸä ÿ®ŸêŸäŸéÿØŸêŸáŸê ÿßŸÑŸíŸÖŸèŸÑŸíŸÉŸè", translation: "Blessed is He in whose hand is dominion.", verse: "67:1" },
                    { arabic: "ŸàŸéŸáŸèŸàŸé ÿπŸéŸÑŸéŸâŸ∞ ŸÉŸèŸÑŸêŸë ÿ¥ŸéŸäŸíÿ°Ÿç ŸÇŸéÿØŸêŸäÿ±Ÿå", translation: "And He is over all things competent.", verse: "67:1" },
                    { arabic: "ÿßŸÑŸéŸëÿ∞ŸêŸä ÿÆŸéŸÑŸéŸÇŸé ÿßŸÑŸíŸÖŸéŸàŸíÿ™Ÿé ŸàŸéÿßŸÑŸíÿ≠ŸéŸäŸéÿßÿ©Ÿé", translation: "He who created death and life.", verse: "67:2" },
                    { arabic: "ŸÑŸêŸäŸéÿ®ŸíŸÑŸèŸàŸéŸÉŸèŸÖŸí ÿ£ŸéŸäŸèŸëŸÉŸèŸÖŸí ÿ£Ÿéÿ≠Ÿíÿ≥ŸéŸÜŸè ÿπŸéŸÖŸéŸÑŸãÿß", translation: "To test you as to which of you is best in deed.", verse: "67:2" },
                    { arabic: "ŸàŸéŸáŸèŸàŸé ÿßŸÑŸíÿπŸéÿ≤ŸêŸäÿ≤Ÿè ÿßŸÑŸíÿ∫ŸéŸÅŸèŸàÿ±Ÿè", translation: "And He is the Exalted in Might, the Forgiving.", verse: "67:2" },
                    { arabic: "ÿßŸÑŸéŸëÿ∞ŸêŸä ÿÆŸéŸÑŸéŸÇŸé ÿ≥Ÿéÿ®ŸíÿπŸé ÿ≥ŸéŸÖŸéÿßŸàŸéÿßÿ™Ÿç ÿ∑Ÿêÿ®ŸéÿßŸÇŸãÿß", translation: "He who created seven heavens in layers.", verse: "67:3" },
                    { arabic: "ŸÖŸéŸëÿß ÿ™Ÿéÿ±ŸéŸâŸ∞ ŸÅŸêŸä ÿÆŸéŸÑŸíŸÇŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸéŸ∞ŸÜŸê ŸÖŸêŸÜ ÿ™ŸéŸÅŸéÿßŸàŸèÿ™Ÿç", translation: "You do not see in the creation of the Most Merciful any inconsistency.", verse: "67:3" },
                    { arabic: "ŸÅŸéÿßÿ±Ÿíÿ¨ŸêÿπŸê ÿßŸÑŸíÿ®ŸéÿµŸéÿ±Ÿé ŸáŸéŸÑŸí ÿ™Ÿéÿ±ŸéŸâŸ∞ ŸÖŸêŸÜ ŸÅŸèÿ∑ŸèŸàÿ±Ÿç", translation: "So return your vision, do you see any breaks?", verse: "67:3" },
                    { arabic: "ŸàŸéŸÑŸéŸÇŸéÿØŸí ÿ≤ŸéŸäŸéŸëŸÜŸéŸëÿß ÿßŸÑÿ≥ŸéŸëŸÖŸéÿßÿ°Ÿé ÿßŸÑÿØŸèŸëŸÜŸíŸäŸéÿß ÿ®ŸêŸÖŸéÿµŸéÿßÿ®ŸêŸäÿ≠Ÿé", translation: "And We have certainly beautified the nearest heaven with stars.", verse: "67:5" },
                    { arabic: "ŸàŸéÿ¨ŸéÿπŸéŸÑŸíŸÜŸéÿßŸáŸéÿß ÿ±Ÿèÿ¨ŸèŸàŸÖŸãÿß ŸÑŸêŸëŸÑÿ¥ŸéŸëŸäŸéÿßÿ∑ŸêŸäŸÜŸê", translation: "And have made them as missiles to drive away the devils.", verse: "67:5" }
                ]
            }
        };

        let currentAyahIndex = 0;

        function getTodaysSurah() {
            const today = new Date();
            const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
            const surahIndex = dayOfYear % Object.keys(DAILY_SURAHS).length;
            return DAILY_SURAHS[surahIndex];
        }

        function displayAyah(index) {
            const surah = getTodaysSurah();
            const ayah = surah.ayahs[index];
            document.getElementById('ayahArabic').textContent = ayah.arabic;
            document.getElementById('ayahTranslation').textContent = ayah.translation;
            document.getElementById('ayahTranslation').style.display = currentLang === 'ar' ? 'none' : 'block';
            document.getElementById('ayahReference').textContent = `üìç ${surah.name} ${ayah.verse}`;
        }

        function nextAyah() {
            const surah = getTodaysSurah();
            currentAyahIndex = (currentAyahIndex + 1) % surah.ayahs.length;
            displayAyah(currentAyahIndex);
        }

        function prevAyah() {
            const surah = getTodaysSurah();
            currentAyahIndex = (currentAyahIndex - 1 + surah.ayahs.length) % surah.ayahs.length;
            displayAyah(currentAyahIndex);
        }

        // ==================== PRAYER NOTIFICATIONS ====================

        let prayerCheckInterval = null;

        function setupPrayerNotifications() {
            if (prayerCheckInterval) clearInterval(prayerCheckInterval);

            prayerCheckInterval = setInterval(() => {
                if (localStorage.getItem('ramadanNotifications') !== 'enabled') return;
                if (Notification.permission !== 'granted') return;

                const now = new Date();
                const currentTime = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');

                PRAYERS.forEach(prayer => {
                    const input = document.getElementById(`${prayer}Time`);
                    if (input && input.value === currentTime) {
                        const t = TRANSLATIONS[currentLang];
                        showNotification(`üïå ${t[prayer]} Time!`, `${t.in} ${t[prayer]}...`);
                    }
                });
            }, 60000);
        }

        // ==================== PERSONAL NOTES & REMINDERS ====================

        let personalNotes = JSON.parse(localStorage.getItem('ramadanNotes') || '[]');

        function addNote() {
            const textInput = document.getElementById('noteTextInput');
            const timeInput = document.getElementById('noteTimeInput');

            if (!textInput.value) {
                alert('Please enter a note!');
                return;
            }

            const newNote = {
                id: Date.now(),
                text: textInput.value,
                time: timeInput.value || null,
                notified: false
            };

            personalNotes.push(newNote);
            saveNotes();
            renderNotes();

            textInput.value = '';
            timeInput.value = '';
        }

        function saveNotes() {
            localStorage.setItem('ramadanNotes', JSON.stringify(personalNotes));
        }

        function deleteNote(id) {
            personalNotes = personalNotes.filter(note => note.id !== id);
            saveNotes();
            renderNotes();
        }

        function renderNotes() {
            const list = document.getElementById('notesList');
            if (!list) return;
            list.innerHTML = '';

            if (personalNotes.length === 0) {
                const t = TRANSLATIONS[currentLang];
                list.innerHTML = `<p style="text-align: center; color: var(--text-muted); font-size: 0.9rem;">${t.noNotes}</p>`;
                return;
            }

            // Sort notes: those with time first (sorted by time), then those without time
            const sortedNotes = [...personalNotes].sort((a, b) => {
                if (a.time && !b.time) return -1;
                if (!a.time && b.time) return 1;
                if (a.time && b.time) return a.time.localeCompare(b.time);
                return b.id - a.id; // Recent first if no time
            });

            sortedNotes.forEach(note => {
                const noteEl = document.createElement('div');
                noteEl.className = 'note-item';

                const timeTag = note.time ? `
                    <div class="note-time-tag">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                        ${formatTime(note.time)}
                    </div>
                ` : '';

                noteEl.innerHTML = `
                    <div class="note-content">
                        <div class="note-text">${note.text}</div>
                        ${timeTag}
                    </div>
                    <button class="delete-note-btn" onclick="deleteNote(${note.id})" title="Delete Note">√ó</button>
                `;
                list.appendChild(noteEl);
            });
        }

        function checkNoteReminders() {
            if (localStorage.getItem('ramadanNotificationsEnabled') !== 'true') return;

            const now = new Date();
            const currentTime = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');

            let changed = false;
            personalNotes.forEach(note => {
                if (note.time === currentTime && !note.notified) {
                    showNotification('üìù Reminder', note.text);
                    note.notified = true;
                    changed = true;
                } else if (note.time !== currentTime && note.notified) {
                    // Reset notified flag once time has passed so it can fire tomorrow
                    note.notified = false;
                    changed = true;
                }
            });

            if (changed) {
                saveNotes();
            }
        }


        // ==================== INITIALIZATION ====================

        // Initialize
        createStars();
        setLanguage(currentLang); // Use setLanguage for initial setup
        loadNotificationSettings();

        // Load saved method
        const savedMethod = localStorage.getItem('prayerMethod');
        if (savedMethod) {
            const methodEl = document.getElementById('calcMethod');
            if (methodEl) methodEl.value = savedMethod;
        }

        const savedMadhab = localStorage.getItem('asrMadhab');
        if (savedMadhab) {
            const madhabEl = document.getElementById('asrMadhab');
            if (madhabEl) madhabEl.value = savedMadhab;
        }

        loadPrayerTimes();
        updateNextPrayer();
        actualRamadanDay = getRamadanDay();
        if (actualRamadanDay) {
            currentViewDay = actualRamadanDay;
        } else {
            currentViewDay = 1;
        }
        updateUI();
        displayAyah(0);
        setupPrayerNotifications();
        renderNotes();

        // Initialize reminders if enabled
        if (localStorage.getItem('ramadanNotificationsEnabled') === 'true') {
            setupAllReminders();
        }

        // Check reminders every minute
        setInterval(() => {
            updateNextPrayer();
            checkNoteReminders();
        }, 60000);

        // Register Service Worker for PWA (Android Support)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker registration failed', err));
            });
        }
    </script>
</body>

</html>
